"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var VanillaCalendar=function(){function n(e){var t;_classCallCheck(this,n),this.HTMLElement=e.HTMLElement,this.date=null!=(t=e.date)?t:new Date,this.settings={lang:null!=(t=null==(t=e.settings)?void 0:t.lang)?t:"en",iso8601:null==(t=null==(t=e.settings)?void 0:t.iso8601)||t,selecting:null==(t=null==(t=e.settings)?void 0:t.selecting)||t,range:{min:null!=(t=null==(t=e.settings)||null==(t=t.range)?void 0:t.min)?t:null,max:null!=(t=null==(t=e.settings)||null==(t=t.range)?void 0:t.max)?t:null,values:null!=(t=null==(t=e.settings)||null==(t=t.range)?void 0:t.values)?t:null},selected:{date:null!=(t=null==(t=e.settings)||null==(t=t.selected)?void 0:t.date)?t:null,month:null!=(t=e.settings)&&null!=(t=t.selected)&&t.month?e.settings.selected.month-1:null,year:null!=(t=null==(t=e.settings)||null==(t=t.selected)?void 0:t.year)?t:null,holidays:null!=(t=null==(t=e.settings)||null==(t=t.selected)?void 0:t.holidays)?t:null},visibility:{weekend:null==(t=null==(t=e.settings)||null==(t=t.visibility)?void 0:t.weekend)||t,today:null==(t=null==(t=e.settings)||null==(t=t.visibility)?void 0:t.today)||t,months:null==(t=null==(t=e.settings)||null==(t=t.visibility)?void 0:t.months)||t,year:null==(t=null==(t=e.settings)||null==(t=t.visibility)?void 0:t.year)||t,arrows:{prev:null==(t=null==(t=e.settings)||null==(t=t.visibility)||null==(t=t.arrows)?void 0:t.prev)||t,next:null==(e=null==(t=e.settings)||null==(e=t.visibility)||null==(t=e.arrows)?void 0:t.next)||e}}},this.name={months:{en:["January","February","March","April","May","June","July","August","September","October","November","December"],ru:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]},week:{en:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ru:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},arrow:{prev:{en:"Prev",ru:"Назад"},next:{en:"Next",ru:"Вперед"}}}}return _createClass(n,[{key:"createDOM",value:function(){var e;this.HTMLElement.innerHTML='\n\t\t\t<div class="vanilla-calendar-header">\n\t\t\t\t<button type="button"\n\t\t\t\t\tclass="vanilla-calendar-arrow vanilla-calendar-arrow_prev"\n\t\t\t\t\tstyle="'.concat(this.settings.visibility.arrows.prev?"":"visibility: hidden",'">\n\t\t\t\t\t').concat(null!=(e=this.name.arrow.prev[this.settings.lang])?e:this.name.arrow.prev.en,'\n\t\t\t\t</button>\n\t\t\t\t<b class="vanilla-calendar-month"></b>\n\t\t\t\t<button type="button"\n\t\t\t\t\tclass="vanilla-calendar-arrow vanilla-calendar-arrow_next"\n\t\t\t\t\tstyle="').concat(this.settings.visibility.arrows.next?"":"visibility: hidden",'">\n\t\t\t\t\t').concat(null!=(e=this.name.arrow.next[this.settings.lang])?e:this.name.arrow.next.en,'\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="vanilla-calendar-content">\n\t\t\t\t<div class="vanilla-calendar-week"></div>\n\t\t\t\t<div class="vanilla-calendar-days"></div>\n\t\t\t</div>\n\t\t')}},{key:"selectingDate",value:function(){this.selectedDate=null,this.selectedMonth=this.date.getMonth(),this.selectedYear=this.date.getFullYear(),null!==this.settings.selected.date&&(this.selectedDate=this.settings.selected.date),null!==this.settings.selected.month&&0<=this.settings.selected.month&&this.settings.selected.month<12&&(this.selectedMonth=this.settings.selected.month),null!==this.settings.selected.year&&1970<=this.settings.selected.year&&this.settings.selected.year<=9999&&(this.selectedYear=this.settings.selected.year)}},{key:"createMonth",value:function(){var e=this.HTMLElement.querySelector(".vanilla-calendar-month"),t=this.HTMLElement.querySelector(".vanilla-calendar-arrow_prev"),n=this.HTMLElement.querySelector(".vanilla-calendar-arrow_next"),a=this.settings.range.min?new Date(this.settings.range.min).getMonth():null,l=this.settings.range.max?new Date(this.settings.range.max).getMonth():null;!0!==this.settings.visibility.months&&null!==a&&a===this.selectedMonth?t.style.visibility="hidden":this.settings.visibility.arrows.prev&&(t.style.visibility=null),this.settings.visibility.months||null===l||l!==this.selectedMonth?this.settings.visibility.arrows.next&&(n.style.visibility=null):n.style.visibility="hidden",this.settings.visibility.year?e.innerText="".concat(this.name.months[this.settings.lang][this.selectedMonth]," ").concat(this.selectedYear):e.innerText=this.name.months[this.settings.lang][this.selectedMonth]}},{key:"createWeek",value:function(){var e=this.HTMLElement.querySelector(".vanilla-calendar-week"),t=this.name.week[this.settings.lang];t.push(t.shift());for(var n=0;n<t.length;n++){var a=t[n],l=document.createElement("span");l.className="vanilla-calendar-week__day",this.settings.visibility.weekend&&this.settings.iso8601?5!==n&&6!==n||l.classList.add("vanilla-calendar-week__day_weekend"):!this.settings.visibility.weekend||this.settings.iso8601||0!==n&&6!==n||l.classList.add("vanilla-calendar-week__day_weekend"),l.innerText="".concat(a),e.append(l)}}},{key:"createDays",value:function(){var s=this,e=new Date(this.selectedYear,this.selectedMonth,1),t=Number(e.getDay()),n=(this.settings.iso8601&&(t=Number((0!==e.getDay()?e.getDay():7)-1)),new Date(this.selectedYear,this.selectedMonth+1,0).getDate()),i=this.HTMLElement.querySelector(".vanilla-calendar-days"),a=(i.innerHTML="",this.settings.selecting&&i.classList.add("vanilla-calendar-days_selecting"),new Date(s.selectedYear,s.selectedMonth,0).getDate()-t),l=s.selectedYear,c=s.selectedMonth;0===s.selectedMonth?(c=s.name.months[s.settings.lang].length,l=s.selectedYear-1):s.selectedMonth<10&&(c="0".concat(s.selectedMonth));for(var r=0;r<t;r++){var d=document.createElement("span");a+=1,d.className="vanilla-calendar-day vanilla-calendar-day_prev",d.innerText="".concat(a),d.dataset.calendarDay="".concat(l,"-").concat(c,"-").concat(a),i.append(d)}for(var o=s.selectedYear,h=s.selectedMonth<10?"0".concat(s.selectedMonth+1):s.selectedMonth+1,u=1;u<=n;u++)!function(e){var t=document.createElement("span"),n=e<10?"0".concat(e):e,a="".concat(o,"-").concat(h,"-").concat(n),n=new Date(a).getDay(),n=(t.className="vanilla-calendar-day",t.innerText="".concat(e),t.dataset.calendarDay=a,!s.settings.visibility.weekend||0!==n&&6!==n||t.classList.add("vanilla-calendar-day_weekend"),Array.isArray(s.settings.selected.holidays)&&s.settings.selected.holidays.forEach(function(e){e===a&&t.classList.add("vanilla-calendar-day_holiday")}),e===s.date.getDate()),e=s.selectedMonth===s.date.getMonth(),l=s.selectedYear===s.date.getFullYear();s.settings.visibility.today&&n&&e&&l&&t.classList.add("vanilla-calendar-day_today"),s.selectedDate===a&&t.classList.add("vanilla-calendar-day_selected"),(s.settings.range.min>a||s.settings.range.max<a)&&t.classList.add("vanilla-calendar-day_disabled"),Array.isArray(s.settings.range.values)&&(s.settings.range.min||s.settings.range.max||t.classList.add("vanilla-calendar-day_disabled"),s.settings.range.values.forEach(function(e){e===a&&t.classList.remove("vanilla-calendar-day_disabled")})),i.append(t)}(u);var e=t+n,v=Math.ceil(e/s.name.week[s.settings.lang].length),g=s.name.week[s.settings.lang].length*v-e,y=s.selectedYear,m=s.selectedMonth+2;s.selectedMonth+1===s.name.months[s.settings.lang].length?(m="01",y=s.selectedYear+1):s.selectedMonth+2<10&&(m="0".concat(s.selectedMonth+2));for(var M=1;M<=g;M++){var b=document.createElement("span"),w=M<10?"0".concat(M):M;b.className="vanilla-calendar-day vanilla-calendar-day_next",b.innerText="".concat(M),b.dataset.calendarDay="".concat(y,"-").concat(m,"-").concat(w),i.append(b)}}},{key:"changeMonth",value:function(e){var t=this.name.months[this.settings.lang].length-1;e.closest(".vanilla-calendar-arrow_prev")?0!==this.selectedMonth?--this.selectedMonth:(--this.selectedYear,this.selectedMonth=t):e.closest(".vanilla-calendar-arrow_next")&&(this.selectedMonth!==t?this.selectedMonth+=1:(this.selectedYear+=1,this.selectedMonth=0)),this.createMonth(),this.createDays()}},{key:"changeDay",value:function(e){e.closest(".vanilla-calendar-day_prev")||e.closest(".vanilla-calendar-day_next")||(this.selectedDate=e.dataset.calendarDay,this.createDays())}},{key:"click",value:function(){var t=this;this.HTMLElement.addEventListener("click",function(e){e.target.closest(".vanilla-calendar-arrow")?t.changeMonth(e.target):t.settings.selecting&&e.target.closest(".vanilla-calendar-day")&&t.changeDay(e.target)})}},{key:"update",value:function(){this.createDOM(),this.selectingDate(),this.createMonth(),this.createWeek(),this.createDays()}},{key:"init",value:function(){this.createDOM(),this.selectingDate(),this.createMonth(),this.createWeek(),this.createDays(),this.click()}}]),n}();exports.default=VanillaCalendar;