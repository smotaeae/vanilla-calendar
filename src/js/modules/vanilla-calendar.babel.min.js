"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class VanillaCalendar{constructor(t){var e,s,n,a,i,l,d,r,h,c,o,v,g,u,y,m,M,w,b,D,p,_,x,$,k,Y,L,f,T,N,S,E,A,q,O,F,W,J,C,H,P,V,j,z,B;this.calendar=t.calendar,this.today=null!==(e=t.today)&&void 0!==e?e:new Date,this.settings={lang:null!==(s=null===(n=t.settings)||void 0===n?void 0:n.lang)&&void 0!==s?s:"ru",iso8601:null===(a=null===(i=t.settings)||void 0===i?void 0:i.iso8601)||void 0===a||a,selecting:null===(l=null===(d=t.settings)||void 0===d?void 0:d.selecting)||void 0===l||l,weekend:null===(r=null===(h=t.settings)||void 0===h?void 0:h.weekend)||void 0===r||r,today:null===(c=null===(o=t.settings)||void 0===o?void 0:o.today)||void 0===c||c,range:{min:null!==(v=null===(g=t.settings)||void 0===g||null===(u=g.range)||void 0===u?void 0:u.min)&&void 0!==v?v:null,max:null!==(y=null===(m=t.settings)||void 0===m||null===(M=m.range)||void 0===M?void 0:M.max)&&void 0!==y?y:null,values:null!==(w=null===(b=t.settings)||void 0===b||null===(D=b.range)||void 0===D?void 0:D.values)&&void 0!==w?w:null},selected:{date:null!==(p=null===(_=t.settings)||void 0===_||null===(x=_.selected)||void 0===x?void 0:x.date)&&void 0!==p?p:null,month:null!==($=t.settings)&&void 0!==$&&null!==(k=$.selected)&&void 0!==k&&k.month?t.settings.selected.month-1:null,year:null!==(Y=null===(L=t.settings)||void 0===L||null===(f=L.selected)||void 0===f?void 0:f.year)&&void 0!==Y?Y:null,holidays:null!==(T=null===(N=t.settings)||void 0===N||null===(S=N.selected)||void 0===S?void 0:S.holidays)&&void 0!==T?T:null},visibility:{year:null===(E=null===(A=t.settings)||void 0===A||null===(q=A.visibility)||void 0===q?void 0:q.year)||void 0===E||E,months:null===(O=null===(F=t.settings)||void 0===F||null===(W=F.visibility)||void 0===W?void 0:W.months)||void 0===O||O,arrows:{prev:null===(J=null===(C=t.settings)||void 0===C||null===(H=C.visibility)||void 0===H||null===(P=H.arrows)||void 0===P?void 0:P.prev)||void 0===J||J,next:null===(V=null===(j=t.settings)||void 0===j||null===(z=j.visibility)||void 0===z||null===(B=z.arrows)||void 0===B?void 0:B.next)||void 0===V||V}}},this.name={months:{eng:["January","February","March","April","May","June","July","August","September","October","November","December"],ru:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]},week:{eng:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ru:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},arrow:{prev:{eng:"Prev",ru:"Назад"},next:{eng:"Next",ru:"Вперед"}}}}createDOM(){this.calendar.innerHTML=`\n\t\t\t<div class="vanilla-calendar-header">\n\t\t\t\t<button type="button"\n\t\t\t\t\tclass="vanilla-calendar-arrow vanilla-calendar-arrow_prev"\n\t\t\t\t\tstyle="${this.settings.visibility.arrows.prev?"":"visibility: hidden"}">\n\t\t\t\t\t${this.name.arrow.prev[this.settings.lang]}\n\t\t\t\t</button>\n\t\t\t\t<b class="vanilla-calendar-month"></b>\n\t\t\t\t<button type="button"\n\t\t\t\t\tclass="vanilla-calendar-arrow vanilla-calendar-arrow_next"\n\t\t\t\t\tstyle="${this.settings.visibility.arrows.next?"":"visibility: hidden"}">\n\t\t\t\t\t${this.name.arrow.next[this.settings.lang]}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="vanilla-calendar-content">\n\t\t\t\t<div class="vanilla-calendar-week"></div>\n\t\t\t\t<div class="vanilla-calendar-days"></div>\n\t\t\t</div>\n\t\t`}selectingDate(){this.selectedDate=null,this.selectedMonth=this.today.getMonth(),this.selectedYear=this.today.getFullYear(),null!==this.settings.selected.date&&(this.selectedDate=this.settings.selected.date),null!==this.settings.selected.month&&this.settings.selected.month>=0&&this.settings.selected.month<12&&(this.selectedMonth=this.settings.selected.month),null!==this.settings.selected.year&&this.settings.selected.year>=1970&&this.settings.selected.year<=9999&&(this.selectedYear=this.settings.selected.year)}createMonth(){const t=this.calendar.querySelector(".vanilla-calendar-month"),e=this.calendar.querySelector(".vanilla-calendar-arrow_prev"),s=this.calendar.querySelector(".vanilla-calendar-arrow_next"),n=this.settings.range.min?new Date(this.settings.range.min).getMonth():null,a=this.settings.range.max?new Date(this.settings.range.max).getMonth():null;!0!==this.settings.visibility.months&&null!==n&&n===this.selectedMonth?e.style.visibility="hidden":this.settings.visibility.arrows.prev&&(e.style.visibility=null),this.settings.visibility.months||null===a||a!==this.selectedMonth?this.settings.visibility.arrows.next&&(s.style.visibility=null):s.style.visibility="hidden",this.settings.visibility.year?t.innerText=`${this.name.months[this.settings.lang][this.selectedMonth]} ${this.selectedYear}`:t.innerText=this.name.months[this.settings.lang][this.selectedMonth]}createWeek(){const t=this.calendar.querySelector(".vanilla-calendar-week"),e=this.name.week[this.settings.lang];e.push(e.shift());for(let s=0;s<e.length;s++){const n=e[s],a=document.createElement("span");a.className="vanilla-calendar-week__day",this.settings.weekend&&this.settings.iso8601?5!==s&&6!==s||a.classList.add("vanilla-calendar-week__day_weekend"):this.settings.weekend&&!this.settings.iso8601&&(0!==s&&6!==s||a.classList.add("vanilla-calendar-week__day_weekend")),a.innerText=`${n}`,t.append(a)}}createDays(){const t=new Date(this.selectedYear,this.selectedMonth,1);let e=Number(t.getDay());this.settings.iso8601&&(e=Number((0!==t.getDay()?t.getDay():7)-1));const s=new Date(this.selectedYear,this.selectedMonth+1,0).getDate(),n=this.calendar.querySelector(".vanilla-calendar-days");n.innerHTML="",this.settings.selecting&&n.classList.add("vanilla-calendar-days_selecting");(()=>{let t=new Date(this.selectedYear,this.selectedMonth,0).getDate()-e,s=this.selectedYear,a=this.selectedMonth;0===this.selectedMonth?(a=this.name.months[this.settings.lang].length,s=this.selectedYear-1):this.selectedMonth<10&&(a=`0${this.selectedMonth}`);for(let i=0;i<e;i++){const e=document.createElement("span");t+=1,e.className="vanilla-calendar-day vanilla-calendar-day_prev",e.innerText=`${t}`,e.dataset.calendarDay=`${s}-${a}-${t}`,n.append(e)}})(),(()=>{const t=this.selectedYear,e=this.selectedMonth<10?`0${this.selectedMonth+1}`:this.selectedMonth+1;for(let a=1;a<=s;a++){const s=document.createElement("span"),i=`${t}-${e}-${a<10?`0${a}`:a}`,l=new Date(i).getDay();s.className="vanilla-calendar-day",s.innerText=`${a}`,s.dataset.calendarDay=i,!this.settings.weekend||0!==l&&6!==l||s.classList.add("vanilla-calendar-day_weekend"),Array.isArray(this.settings.selected.holidays)&&this.settings.selected.holidays.forEach((t=>{t===i&&s.classList.add("vanilla-calendar-day_holiday")}));const d=a===this.today.getDate(),r=this.selectedMonth===this.today.getMonth(),h=this.selectedYear===this.today.getFullYear();this.settings.today&&d&&r&&h&&s.classList.add("vanilla-calendar-day_today"),this.selectedDate===i&&s.classList.add("vanilla-calendar-day_selected"),(this.settings.range.min>i||this.settings.range.max<i)&&s.classList.add("vanilla-calendar-day_disabled"),Array.isArray(this.settings.range.values)&&(this.settings.range.min||this.settings.range.max||s.classList.add("vanilla-calendar-day_disabled"),this.settings.range.values.forEach((t=>{t===i&&s.classList.remove("vanilla-calendar-day_disabled")}))),n.append(s)}})(),(()=>{const t=e+s,a=Math.ceil(t/this.name.week[this.settings.lang].length),i=this.name.week[this.settings.lang].length*a-t;let l=this.selectedYear,d=this.selectedMonth+2;this.selectedMonth+1===this.name.months[this.settings.lang].length?(d="01",l=this.selectedYear+1):this.selectedMonth+2<10&&(d=`0${this.selectedMonth+2}`);for(let t=1;t<=i;t++){const e=document.createElement("span"),s=t<10?`0${t}`:t;e.className="vanilla-calendar-day vanilla-calendar-day_next",e.innerText=`${t}`,e.dataset.calendarDay=`${l}-${d}-${s}`,n.append(e)}})()}changeMonth(t){const e=this.name.months[this.settings.lang].length-1;t.closest(".vanilla-calendar-arrow_prev")?0!==this.selectedMonth?this.selectedMonth-=1:(this.selectedYear-=1,this.selectedMonth=e):t.closest(".vanilla-calendar-arrow_next")&&(this.selectedMonth!==e?this.selectedMonth+=1:(this.selectedYear+=1,this.selectedMonth=0)),this.createMonth(),this.createDays()}changeDay(t){t.closest(".vanilla-calendar-day_prev")||t.closest(".vanilla-calendar-day_next")||(this.selectedDate=t.dataset.calendarDay,this.createDays())}click(){this.calendar.addEventListener("click",(t=>{t.target.closest(".vanilla-calendar-arrow")?this.changeMonth(t.target):this.settings.selecting&&t.target.closest(".vanilla-calendar-day")&&this.changeDay(t.target)}))}update(){this.createDOM(),this.selectingDate(),this.createMonth(),this.createWeek(),this.createDays()}init(){this.createDOM(),this.selectingDate(),this.createMonth(),this.createWeek(),this.createDays(),this.click()}}exports.default=VanillaCalendar;
