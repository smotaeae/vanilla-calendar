!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["my-library"]=e():t["my-library"]=e()}(self,(()=>(()=>{"use strict";var t={d:(e,a)=>{for(var s in a)t.o(a,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:a[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>a});class a{constructor(t,e){this.HTMLElement=document.querySelector(t),this.HTMLElement&&(this.type=e?.type??"default",this.title=e.title??"",this.date={min:e?.date?.min??"1970-01-01",max:e?.date?.max??"2470-12-31",today:e?.date?.today??new Date},this.settings={lang:e?.settings?.lang??"en",iso8601:e?.settings?.iso8601??!0,range:{min:e?.settings?.range?.min??this.date.min,max:e?.settings?.range?.max??this.date.max,disabled:e?.settings?.range?.disabled??null},selection:{day:e?.settings?.selection?.day??"single",month:e?.settings?.selection?.month??!0,year:e?.settings?.selection?.year??!0},selected:{active:e.settings?.selected?.active??null,dates:e?.settings?.selected?.dates??null,month:e?.settings?.selected?.month??null,year:e?.settings?.selected?.year??null,holidays:e?.settings?.selected?.holidays??null},visibility:{monthShort:e?.settings?.visibility?.monthShort??!0,weekNumbers:e?.settings?.visibility?.weekNumbers??!1,weekend:e?.settings?.visibility?.weekend??!0,today:e?.settings?.visibility?.today??!0,disabled:e?.settings?.visibility?.disabled??!1}},this.locale={months:e?.locale?.months??[],weekday:e?.locale?.weekday??[]},this.actions={clickDay:e?.actions?.clickDay??null,clickMonth:e?.actions?.clickMonth??null,clickYear:e?.actions?.clickYear??null},this.popups=e?.popups??null,this.currentType=this.type,this.currentTitle=this.title)}setVariablesDates(){this.activeDates=[],this.selectedDates=[],this.selectedMonth=this.date.today.getUTCMonth(),this.selectedYear=this.date.today.getUTCFullYear(),null!==this.settings.selected.dates&&(this.selectedDates=this.settings.selected.dates),null!==this.settings.selected.active&&(this.activeDates=this.settings.selected.active),null!==this.settings.selected.month&&this.settings.selected.month>=0&&this.settings.selected.month<12&&(this.selectedMonth=this.settings.selected.month),null!==this.settings.selected.year&&this.settings.selected.year>=0&&this.settings.selected.year<=9999&&(this.selectedYear=this.settings.selected.year),this.viewYear=this.selectedYear,this.dateMin=this.settings.visibility.disabled?new Date(this.date.min):new Date(this.settings.range.min),this.dateMax=this.settings.visibility.disabled?new Date(this.date.max):new Date(this.settings.range.max)}createDOM(){"default"===this.currentType?(this.HTMLElement.classList.add("vanilla-calendar_default"),this.HTMLElement.classList.remove("vanilla-calendar_month"),this.HTMLElement.classList.remove("vanilla-calendar_year"),this.HTMLElement.innerHTML=`\n\t\t\t<div class="vanilla-calendar-header vanilla-calendar-header-main">\n\t\t\t\t<div class="vanilla-calendar-header-title">\n\t\t\t\t\t${this.currentTitle}\n\t\t\t\t</div>\n\t\t\t\t<div class="vanilla-calendar-header-controls">\n\t\t\t\t<button type="button"\n\t\t\t\t\tclass="vanilla-calendar-arrow vanilla-calendar-arrow_prev"\n\t\t\t\t\ttitle="prev">\n\t\t\t\t</button>\n\t\t\t\t<div class="vanilla-calendar-header__content">\n\t\t\t\t\t<b class="vanilla-calendar-month${this.settings.selection.month?"":" vanilla-calendar-month_disabled"}"></b>\n\t\t\t\t\t<b class="vanilla-calendar-year${this.settings.selection.year?"":" vanilla-calendar-year_disabled"}"></b>\n\t\t\t\t</div>\n\t\t\t\t<button type="button"\n\t\t\t\t\tclass="vanilla-calendar-arrow vanilla-calendar-arrow_next"\n\t\t\t\t\ttitle="next">\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t${this.settings.visibility.weekNumbers?'\n\t\t\t<div class="vanilla-calendar-column">\n\t\t\t\t<div class="vanilla-calendar-column__title">#</div>\n\t\t\t\t<div class="vanilla-calendar-column__content vanilla-calendar-week-numbers"></div>\n\t\t\t</div>\n\t\t\t':""}\n\t\t\t<div class="vanilla-calendar-content">\n\t\t\t\t<div class="vanilla-calendar-week"></div>\n\t\t\t\t<div class="vanilla-calendar-days"></div>\n\t\t\t</div>\n\t\t`):"month"===this.currentType?(this.HTMLElement.classList.remove("vanilla-calendar_default"),this.HTMLElement.classList.add("vanilla-calendar_month"),this.HTMLElement.classList.remove("vanilla-calendar_year"),this.HTMLElement.innerHTML=`\n\t\t\t<div class="vanilla-calendar-header">\n\t\t\t\t<div class="vanilla-calendar-header__content">\n\t\t\t\t\t<b class="vanilla-calendar-month"></b>\n\t\t\t\t\t<b class="vanilla-calendar-year vanilla-calendar-year_not-active${this.settings.selection.year?"":" vanilla-calendar-year_disabled"}"></b>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="vanilla-calendar-content">\n\t\t\t\t<div class="vanilla-calendar-months"></div>\n\t\t\t</div>`):"year"===this.currentType&&(this.HTMLElement.classList.remove("vanilla-calendar_default"),this.HTMLElement.classList.remove("vanilla-calendar_month"),this.HTMLElement.classList.add("vanilla-calendar_year"),this.HTMLElement.innerHTML=`\n\t\t\t<div class="vanilla-calendar-header">\n\t\t\t\t<button type="button"\n\t\t\t\t\tclass="vanilla-calendar-arrow vanilla-calendar-arrow_prev"\n\t\t\t\t\ttitle="prev">\n\t\t\t\t</button>\n\t\t\t\t<div class="vanilla-calendar-header__content">\n\t\t\t\t\t<b class="vanilla-calendar-month vanilla-calendar-month_not-active${this.settings.selection.month?"":" vanilla-calendar-month_disabled"}"></b>\n\t\t\t\t\t<b class="vanilla-calendar-year"></b>\n\t\t\t\t</div>\n\t\t\t\t<button type="button"\n\t\t\t\t\tclass="vanilla-calendar-arrow vanilla-calendar-arrow_next"\n\t\t\t\t\ttitle="next">\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="vanilla-calendar-content">\n\t\t\t\t<div class="vanilla-calendar-years"></div>\n\t\t\t</div>`)}generateDate(t){const e=t.getUTCFullYear();let a=t.getUTCMonth()+1,s=t.getUTCDate();return a=a<10?`0${a}`:a,s=s<10?`0${s}`:s,`${e}-${a}-${s}`}controlArrows(){if(!["default","year"].includes(this.currentType))return;const t=this.HTMLElement.querySelector(".vanilla-calendar-arrow_prev"),e=this.HTMLElement.querySelector(".vanilla-calendar-arrow_next");(()=>{if("default"!==this.currentType)return;const a=this.selectedMonth===this.dateMin.getUTCMonth(),s=this.selectedMonth===this.dateMax.getUTCMonth(),i=this.selectedYear===this.dateMin.getUTCFullYear(),l=this.selectedYear===this.dateMax.getUTCFullYear();a&&i||!this.settings.selection.month?t.style.visibility="hidden":t.style.visibility=null,s&&l||!this.settings.selection.month?e.style.visibility="hidden":e.style.visibility=null})(),(()=>{"year"===this.currentType&&(this.dateMin.getUTCFullYear()&&this.viewYear-7<=this.dateMin.getUTCFullYear()?t.style.visibility="hidden":t.style.visibility=null,this.dateMax.getUTCFullYear()&&this.viewYear+7>=this.dateMax.getUTCFullYear()?e.style.visibility="hidden":e.style.visibility=null)})()}writeYear(){this.HTMLElement.querySelector(".vanilla-calendar-year").innerText=this.selectedYear}writeMonth(){this.HTMLElement.querySelector(".vanilla-calendar-month").innerText=this.locale.months[this.selectedMonth]}createWeek(){const t=this.HTMLElement.querySelector(".vanilla-calendar-week"),e=document.createElement("span");e.className="vanilla-calendar-week__day";const a=[...this.locale.weekday];this.settings.iso8601&&a.push(a.shift()),t.innerHTML="";for(let s=0;s<a.length;s++){const i=a[s],l=e.cloneNode(!0);this.settings.visibility.weekend&&this.settings.iso8601?5!==s&&6!==s||l.classList.add("vanilla-calendar-week__day_weekend"):this.settings.visibility.weekend&&!this.settings.iso8601&&(0!==s&&6!==s||l.classList.add("vanilla-calendar-week__day_weekend")),l.innerText=`${i}`,t.append(l)}}getWeekNumber(t){const e=new Date(t).getUTCDate(),a=new Date(t).getUTCMonth(),s=new Date(t).getUTCFullYear(),i=new Date(s,a,e),l=new Date(Date.UTC(i.getUTCFullYear(),0,1)),n=Math.ceil(((i-l)/864e5+1)/7);return{year:i.getUTCFullYear(),week:n}}createWeekNumbers(t,e){if(!this.settings.visibility.weekNumbers)return;const a=this.HTMLElement.querySelector(".vanilla-calendar-week-numbers"),s=this.HTMLElement.querySelectorAll(".vanilla-calendar-day"),i=Math.ceil((t+e)/7),l=document.createElement("span");l.className="vanilla-calendar-week-number",a.innerHTML="";for(let t=0;t<i;t++){const e=this.getWeekNumber(s[7*t].dataset.calendarDay),i=l.cloneNode(!0);i.innerText=`${e.week}`,i.dataset.calendarYear=`${e.year}`,a.append(i)}}createPopup(t){if(this.popups)for(const e in this.popups)if(Object.hasOwnProperty.call(this.popups,e)){const a=t.querySelector(`[data-calendar-day="${e}"]`);if(!a)return;const s=this.popups[e];a.classList.add(s.modifier),a.innerHTML+=`<div class="vanilla-calendar-day__popup">${s.html}</div>`}}createDays(){const t=new Date(Date.UTC(this.selectedYear,this.selectedMonth,1)),e=new Date(Date.UTC(this.selectedYear,this.selectedMonth+1,0)).getUTCDate();let a=Number(t.getUTCDay());this.settings.iso8601&&(a=Number((0!==t.getUTCDay()?t.getUTCDay():7)-1));const s=this.HTMLElement.querySelector(".vanilla-calendar-days"),i=document.createElement("div");i.className="vanilla-calendar-day",["single","multiple","multiple-ranged"].includes(this.settings.selection.day)&&s.classList.add("vanilla-calendar-days_selecting"),s.innerHTML="";const l=(t,e,a)=>{!this.settings.visibility.weekend||0!==e&&6!==e||t.classList.add("vanilla-calendar-day_weekend"),Array.isArray(this.settings.selected.holidays)&&this.settings.selected.holidays.forEach((e=>{e===a&&t.classList.add("vanilla-calendar-day_holiday")}));let s=this.date.today.getUTCDate(),i=this.date.today.getUTCMonth()+1;s=s<10?`0${s}`:s,i=i<10?`0${i}`:i;const l=`${this.date.today.getUTCFullYear()}-${i}-${s}`;this.settings.visibility.today&&t.dataset.calendarDay===l&&t.classList.add("vanilla-calendar-day_today"),this.selectedDates.find((t=>t===a))&&t.classList.add("vanilla-calendar-day_selected"),this.activeDates.find((t=>t===a))&&t.classList.add("vanilla-calendar-day_active"),(this.settings.range.min>a||this.settings.range.max<a)&&t.classList.add("vanilla-calendar-day_disabled"),Array.isArray(this.settings.range.disabled)&&this.settings.range.disabled.forEach((e=>{e===a&&t.classList.add("vanilla-calendar-day_disabled")}))};(()=>{let t=new Date(Date.UTC(this.selectedYear,this.selectedMonth,0)).getUTCDate()-a,e=this.selectedYear,n=this.selectedMonth;0===this.selectedMonth?(n=this.locale.months.length,e=this.selectedYear-1):this.selectedMonth<10&&(n=`0${this.selectedMonth}`);for(let c=0;c<a;c++){t+=1;const a=`${e}-${n}-${t}`,c=new Date(Date.UTC(this.selectedYear,this.selectedMonth,t-1)).getUTCMonth()-1,r=new Date(Date.UTC(this.selectedYear,c,t)).getUTCDay(),d=i.cloneNode(!0);d.classList.add("vanilla-calendar-day_prev"),d.innerText=`${t}`,d.dataset.calendarDay=a,l(d,r,a),s.append(d)}})(),(()=>{for(let t=1;t<=e;t++){const e=new Date(Date.UTC(this.selectedYear,this.selectedMonth,t)),a=this.generateDate(e),n=e.getUTCDay(),c=i.cloneNode(!0);c.innerText=`${t}`,c.dataset.calendarDay=a,l(c,n,a),s.append(c)}})(),(()=>{const t=a+e,n=Math.ceil(t/this.locale.weekday.length),c=this.locale.weekday.length*n-t;let r=this.selectedYear,d=this.selectedMonth+2;this.selectedMonth+1===this.locale.months.length?(d="01",r=this.selectedYear+1):this.selectedMonth+2<10&&(d=`0${this.selectedMonth+2}`);for(let t=1;t<=c;t++){const e=`${r}-${d}-${t<10?`0${t}`:t}`,a=new Date(Date.UTC(this.selectedYear,this.selectedMonth,t)).getUTCMonth()+1,n=new Date(Date.UTC(this.selectedYear,a,t)).getUTCDay(),c=i.cloneNode(!0);c.classList.add("vanilla-calendar-day_next"),c.innerText=`${t}`,c.dataset.calendarDay=e,l(c,n,e),s.append(c)}})(),this.createPopup(s),this.createWeekNumbers(a,e)}changeMonth(t){const e=this.locale.months.length-1;switch(t){case"prev":0!==this.selectedMonth?this.selectedMonth-=1:this.settings.selection.year&&(this.selectedYear-=1,this.selectedMonth=e);break;case"next":this.selectedMonth!==e?this.selectedMonth+=1:this.settings.selection.year&&(this.selectedYear+=1,this.selectedMonth=0)}this.settings.selected.month=this.selectedMonth,this.controlArrows(),this.writeYear(),this.writeMonth(),this.createDays()}createYears(){this.currentType="year",this.createDOM(),this.controlArrows(),this.writeYear(),this.writeMonth();const t=this.HTMLElement.querySelector(".vanilla-calendar-years");this.settings.selection.year&&t.classList.add("vanilla-calendar-years_selecting");const e=document.createElement("span");e.className="vanilla-calendar-years__year";for(let a=this.viewYear-7;a<this.viewYear+8;a++){const s=a,i=e.cloneNode(!0);s===this.selectedYear&&i.classList.add("vanilla-calendar-years__year_selected"),s<this.dateMin.getUTCFullYear()&&i.classList.add("vanilla-calendar-years__year_disabled"),s>this.dateMax.getUTCFullYear()&&i.classList.add("vanilla-calendar-years__year_disabled"),i.dataset.calendarYear=s,i.innerText=`${s}`,t.append(i)}}createMonths(){this.currentType="month",this.createDOM(),this.writeYear(),this.writeMonth();const t=this.HTMLElement.querySelector(".vanilla-calendar-months");this.settings.selection.month&&t.classList.add("vanilla-calendar-months_selecting");const e=document.createElement("span");e.className="vanilla-calendar-months__month";for(let a=0;a<this.locale.months.length;a++){const s=this.locale.months[a],i=e.cloneNode(!0);a===this.selectedMonth&&i.classList.add("vanilla-calendar-months__month_selected"),a<this.dateMin.getUTCMonth()&&this.selectedYear===this.dateMin.getUTCFullYear()&&i.classList.add("vanilla-calendar-months__month_disabled"),a>this.dateMax.getUTCMonth()&&this.selectedYear===this.dateMax.getUTCFullYear()&&i.classList.add("vanilla-calendar-months__month_disabled"),i.dataset.calendarMonth=a,i.title=`${s}`,i.innerText=`${this.settings.visibility.monthShort?s.substring(0,3):s}`,t.append(i)}}getLocale(){if("define"!==this.settings.lang){this.locale.weekday=[];for(let t=0;t<7;t++){let e=new Date(0,0,t).toLocaleString(this.settings.lang,{weekday:"short"});e=`${e.charAt(0).toUpperCase()}${e.substring(1,e.length)}`,e=e.replace(/\./,""),this.locale.weekday.push(e)}this.locale.months=[];for(let t=0;t<12;t++){let e=new Date(0,t).toLocaleString(this.settings.lang,{month:"long"});e=`${e.charAt(0).toUpperCase()}${e.substring(1,e.length)}`,e=e.replace(/\./,""),this.locale.months.push(e)}}}update(){this.setVariablesDates(),this.createDOM(),this.controlArrows(),this.getLocale(),this.writeYear(),this.writeMonth(),"default"===this.currentType?(this.createWeek(),this.createDays()):"month"===this.currentType?this.createMonths():"year"===this.currentType&&this.createYears()}click(){this.HTMLElement.addEventListener("click",(t=>{const e=t.target.closest(".vanilla-calendar-arrow"),a=t.target.closest(".vanilla-calendar-arrow_prev"),s=t.target.closest(".vanilla-calendar-arrow_next"),i=t.target.closest(".vanilla-calendar-day"),l=t.target.closest(".vanilla-calendar-day_prev"),n=t.target.closest(".vanilla-calendar-day_next"),c=t.target.closest(".vanilla-calendar-year"),r=t.target.closest(".vanilla-calendar-years__year"),d=t.target.closest(".vanilla-calendar-month"),h=t.target.closest(".vanilla-calendar-months__month"),o=()=>{i.classList.contains("vanilla-calendar-day_selected")?this.selectedDates.splice(this.selectedDates.indexOf(i.dataset.calendarDay),1):(this.selectedDates=[],this.selectedDates.push(i.dataset.calendarDay))},y=()=>{i.classList.contains("vanilla-calendar-day_selected")?this.selectedDates.splice(this.selectedDates.indexOf(i.dataset.calendarDay),1):this.selectedDates.push(i.dataset.calendarDay)},g=()=>{if(this.selectedDates.length>1&&(this.selectedDates=[]),this.selectedDates.push(i.dataset.calendarDay),!this.selectedDates[1])return;const t=new Date(Date.UTC(new Date(this.selectedDates[0]).getUTCFullYear(),new Date(this.selectedDates[0]).getUTCMonth(),new Date(this.selectedDates[0]).getUTCDate())),e=new Date(Date.UTC(new Date(this.selectedDates[1]).getUTCFullYear(),new Date(this.selectedDates[1]).getUTCMonth(),new Date(this.selectedDates[1]).getUTCDate())),a=t=>{const e=this.generateDate(t);this.settings.range.disabled&&this.settings.range.disabled.includes(e)||this.selectedDates.push(e)};if(this.selectedDates=[],e>t)for(let s=t;s<=e;s.setUTCDate(s.getUTCDate()+1))a(s);else for(let s=t;s>=e;s.setUTCDate(s.getUTCDate()-1))a(s)};(()=>{if(["single","multiple","multiple-ranged"].includes(this.settings.selection.day)&&i){switch(this.settings.selection.day){case"single":o();break;case"multiple":y();break;case"multiple-ranged":g()}this.actions.clickDay&&this.actions.clickDay(t),this.settings.selected.dates=this.selectedDates,l?this.changeMonth("prev"):n?this.changeMonth("next"):this.createDays()}else e&&"year"!==this.currentType&&"month"!==this.currentType&&this.changeMonth(t.target.title)})(),(()=>{if(this.settings.selection.year)if(e&&"year"===this.currentType)s?this.viewYear+=15:a&&(this.viewYear-=15),this.createYears();else if("year"!==this.currentType&&c)this.createYears();else if("year"===this.currentType&&c)this.currentType=this.type,this.update();else if(r){const e=Number(r.dataset.calendarYear);this.currentType=this.type,this.selectedMonth<this.dateMin.getUTCMonth()&&e===this.dateMin.getUTCFullYear()&&(this.settings.selected.month=this.dateMin.getUTCMonth()),this.selectedMonth>this.dateMax.getUTCMonth()&&e===this.dateMax.getUTCFullYear()&&(this.settings.selected.month=this.dateMax.getUTCMonth()),this.settings.selected.year=e,this.actions.clickYear&&this.actions.clickYear(t),this.update()}})(),(()=>{if(this.settings.selection.month)if("month"!==this.currentType&&d)this.createMonths();else if("month"===this.currentType&&d)this.currentType=this.type,this.update();else if(h){const e=Number(h.dataset.calendarMonth);this.currentType=this.type,this.settings.selected.month=e,this.actions.clickMonth&&this.actions.clickMonth(t),this.update()}})()}))}init(){this.HTMLElement&&(this.update(),this.click())}}return window.VanillaCalendar=a,e})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTWpKLEVBQVEyRixPQUFPc0QsRUFBWWpFLFFBQVE0QyxlQUN6QzlJLEtBQUtvQyxZQUFjcEMsS0FBS0ksS0FDeEJKLEtBQUtXLFNBQVNTLFNBQVNGLE1BQVFBLEVBQzNCbEIsS0FBSytCLFFBQVFFLFlBQVlqQyxLQUFLK0IsUUFBUUUsV0FBV3VILEdBQ3JEeEosS0FBS3FKLFdBTVBwSCxNQUlGNkksT0FDTTlLLEtBQUtDLGNBQ1ZELEtBQUtxSixTQUNMckosS0FBS3NKLFUsT0FJUHlCLE9BQU9uTCxnQkFBa0JBLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1saWJyYXJ5L3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9teS1saWJyYXJ5L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL215LWxpYnJhcnkvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL215LWxpYnJhcnkvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9teS1saWJyYXJ5L3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL3NyYy9qcy9tb2R1bGVzL3ZhbmlsbGEtY2FsZW5kYXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wibXktbGlicmFyeVwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJteS1saWJyYXJ5XCJdID0gZmFjdG9yeSgpO1xufSkoc2VsZiwgKCkgPT4ge1xucmV0dXJuICIsIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmFuaWxsYUNhbGVuZGFyIHtcblx0Y29uc3RydWN0b3Ioc2VsZWN0b3IsIG9wdGlvbikge1xuXHRcdHRoaXMuSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcblx0XHRpZiAoIXRoaXMuSFRNTEVsZW1lbnQpIHJldHVybjtcblx0XHR0aGlzLnR5cGUgPSBvcHRpb24/LnR5cGUgPz8gJ2RlZmF1bHQnO1xuXHRcdHRoaXMudGl0bGUgPSBvcHRpb24udGl0bGUgPz8gJyc7XG5cdFx0dGhpcy5kYXRlID0ge1xuXHRcdFx0bWluOiBvcHRpb24/LmRhdGU/Lm1pbiA/PyAnMTk3MC0wMS0wMScsXG5cdFx0XHRtYXg6IG9wdGlvbj8uZGF0ZT8ubWF4ID8/ICcyNDcwLTEyLTMxJyxcblx0XHRcdHRvZGF5OiBvcHRpb24/LmRhdGU/LnRvZGF5ID8/IG5ldyBEYXRlKCksXG5cdFx0fTtcblx0XHR0aGlzLnNldHRpbmdzID0ge1xuXHRcdFx0bGFuZzogb3B0aW9uPy5zZXR0aW5ncz8ubGFuZyA/PyAnZW4nLFxuXHRcdFx0aXNvODYwMTogb3B0aW9uPy5zZXR0aW5ncz8uaXNvODYwMSA/PyB0cnVlLFxuXHRcdFx0cmFuZ2U6IHtcblx0XHRcdFx0bWluOiBvcHRpb24/LnNldHRpbmdzPy5yYW5nZT8ubWluID8/IHRoaXMuZGF0ZS5taW4sXG5cdFx0XHRcdG1heDogb3B0aW9uPy5zZXR0aW5ncz8ucmFuZ2U/Lm1heCA/PyB0aGlzLmRhdGUubWF4LFxuXHRcdFx0XHRkaXNhYmxlZDogb3B0aW9uPy5zZXR0aW5ncz8ucmFuZ2U/LmRpc2FibGVkID8/IG51bGwsXG5cdFx0XHR9LFxuXHRcdFx0c2VsZWN0aW9uOiB7XG5cdFx0XHRcdGRheTogb3B0aW9uPy5zZXR0aW5ncz8uc2VsZWN0aW9uPy5kYXkgPz8gJ3NpbmdsZScsXG5cdFx0XHRcdG1vbnRoOiBvcHRpb24/LnNldHRpbmdzPy5zZWxlY3Rpb24/Lm1vbnRoID8/IHRydWUsXG5cdFx0XHRcdHllYXI6IG9wdGlvbj8uc2V0dGluZ3M/LnNlbGVjdGlvbj8ueWVhciA/PyB0cnVlLFxuXHRcdFx0fSxcblx0XHRcdHNlbGVjdGVkOiB7XG5cdFx0XHRcdGFjdGl2ZTogb3B0aW9uLnNldHRpbmdzPy5zZWxlY3RlZD8uYWN0aXZlID8/IG51bGwsXG5cdFx0XHRcdGRhdGVzOiBvcHRpb24/LnNldHRpbmdzPy5zZWxlY3RlZD8uZGF0ZXMgPz8gbnVsbCxcblx0XHRcdFx0bW9udGg6IG9wdGlvbj8uc2V0dGluZ3M/LnNlbGVjdGVkPy5tb250aCA/PyBudWxsLFxuXHRcdFx0XHR5ZWFyOiBvcHRpb24/LnNldHRpbmdzPy5zZWxlY3RlZD8ueWVhciA/PyBudWxsLFxuXHRcdFx0XHRob2xpZGF5czogb3B0aW9uPy5zZXR0aW5ncz8uc2VsZWN0ZWQ/LmhvbGlkYXlzID8/IG51bGwsXG5cdFx0XHR9LFxuXHRcdFx0dmlzaWJpbGl0eToge1xuXHRcdFx0XHRtb250aFNob3J0OiBvcHRpb24/LnNldHRpbmdzPy52aXNpYmlsaXR5Py5tb250aFNob3J0ID8/IHRydWUsXG5cdFx0XHRcdHdlZWtOdW1iZXJzOiBvcHRpb24/LnNldHRpbmdzPy52aXNpYmlsaXR5Py53ZWVrTnVtYmVycyA/PyBmYWxzZSxcblx0XHRcdFx0d2Vla2VuZDogb3B0aW9uPy5zZXR0aW5ncz8udmlzaWJpbGl0eT8ud2Vla2VuZCA/PyB0cnVlLFxuXHRcdFx0XHR0b2RheTogb3B0aW9uPy5zZXR0aW5ncz8udmlzaWJpbGl0eT8udG9kYXkgPz8gdHJ1ZSxcblx0XHRcdFx0ZGlzYWJsZWQ6IG9wdGlvbj8uc2V0dGluZ3M/LnZpc2liaWxpdHk/LmRpc2FibGVkID8/IGZhbHNlLFxuXHRcdFx0fSxcblx0XHR9O1xuXHRcdHRoaXMubG9jYWxlID0ge1xuXHRcdFx0bW9udGhzOiBvcHRpb24/LmxvY2FsZT8ubW9udGhzID8/IFtdLFxuXHRcdFx0d2Vla2RheTogb3B0aW9uPy5sb2NhbGU/LndlZWtkYXkgPz8gW10sXG5cdFx0fTtcblx0XHR0aGlzLmFjdGlvbnMgPSB7XG5cdFx0XHRjbGlja0RheTogb3B0aW9uPy5hY3Rpb25zPy5jbGlja0RheSA/PyBudWxsLFxuXHRcdFx0Y2xpY2tNb250aDogb3B0aW9uPy5hY3Rpb25zPy5jbGlja01vbnRoID8/IG51bGwsXG5cdFx0XHRjbGlja1llYXI6IG9wdGlvbj8uYWN0aW9ucz8uY2xpY2tZZWFyID8/IG51bGwsXG5cdFx0fTtcblx0XHR0aGlzLnBvcHVwcyA9IG9wdGlvbj8ucG9wdXBzID8/IG51bGw7XG5cblx0XHR0aGlzLmN1cnJlbnRUeXBlID0gdGhpcy50eXBlO1xuXHRcdHRoaXMuY3VycmVudFRpdGxlID0gdGhpcy50aXRsZTtcblx0fVxuXG5cdHNldFZhcmlhYmxlc0RhdGVzKCkge1xuXHRcdHRoaXMuYWN0aXZlRGF0ZXMgPSBbXTtcblx0XHR0aGlzLnNlbGVjdGVkRGF0ZXMgPSBbXTtcblx0XHR0aGlzLnNlbGVjdGVkTW9udGggPSB0aGlzLmRhdGUudG9kYXkuZ2V0VVRDTW9udGgoKTtcblx0XHR0aGlzLnNlbGVjdGVkWWVhciA9IHRoaXMuZGF0ZS50b2RheS5nZXRVVENGdWxsWWVhcigpO1xuXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2VsZWN0ZWQuZGF0ZXMgIT09IG51bGwpIHtcblx0XHRcdHRoaXMuc2VsZWN0ZWREYXRlcyA9IHRoaXMuc2V0dGluZ3Muc2VsZWN0ZWQuZGF0ZXM7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2VsZWN0ZWQuYWN0aXZlICE9PSBudWxsKSB7XG5cdFx0XHR0aGlzLmFjdGl2ZURhdGVzID0gdGhpcy5zZXR0aW5ncy5zZWxlY3RlZC5hY3RpdmU7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2VsZWN0ZWQubW9udGggIT09IG51bGwgJiYgdGhpcy5zZXR0aW5ncy5zZWxlY3RlZC5tb250aCA+PSAwICYmIHRoaXMuc2V0dGluZ3Muc2VsZWN0ZWQubW9udGggPCAxMikge1xuXHRcdFx0dGhpcy5zZWxlY3RlZE1vbnRoID0gdGhpcy5zZXR0aW5ncy5zZWxlY3RlZC5tb250aDtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5zZXR0aW5ncy5zZWxlY3RlZC55ZWFyICE9PSBudWxsICYmIHRoaXMuc2V0dGluZ3Muc2VsZWN0ZWQueWVhciA+PSAwICYmIHRoaXMuc2V0dGluZ3Muc2VsZWN0ZWQueWVhciA8PSA5OTk5KSB7XG5cdFx0XHR0aGlzLnNlbGVjdGVkWWVhciA9IHRoaXMuc2V0dGluZ3Muc2VsZWN0ZWQueWVhcjtcblx0XHR9XG5cblx0XHR0aGlzLnZpZXdZZWFyID0gdGhpcy5zZWxlY3RlZFllYXI7XG5cdFx0dGhpcy5kYXRlTWluID0gdGhpcy5zZXR0aW5ncy52aXNpYmlsaXR5LmRpc2FibGVkID8gbmV3IERhdGUodGhpcy5kYXRlLm1pbikgOiBuZXcgRGF0ZSh0aGlzLnNldHRpbmdzLnJhbmdlLm1pbik7XG5cdFx0dGhpcy5kYXRlTWF4ID0gdGhpcy5zZXR0aW5ncy52aXNpYmlsaXR5LmRpc2FibGVkID8gbmV3IERhdGUodGhpcy5kYXRlLm1heCkgOiBuZXcgRGF0ZSh0aGlzLnNldHRpbmdzLnJhbmdlLm1heCk7XG5cdH1cblxuXHRjcmVhdGVET00oKSB7XG5cdFx0aWYgKHRoaXMuY3VycmVudFR5cGUgPT09ICdkZWZhdWx0Jykge1xuXHRcdFx0dGhpcy5IVE1MRWxlbWVudC5jbGFzc0xpc3QuYWRkKCd2YW5pbGxhLWNhbGVuZGFyX2RlZmF1bHQnKTtcblx0XHRcdHRoaXMuSFRNTEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgndmFuaWxsYS1jYWxlbmRhcl9tb250aCcpO1xuXHRcdFx0dGhpcy5IVE1MRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCd2YW5pbGxhLWNhbGVuZGFyX3llYXInKTtcblx0XHRcdHRoaXMuSFRNTEVsZW1lbnQuaW5uZXJIVE1MID0gYFxuXHRcdFx0PGRpdiBjbGFzcz1cInZhbmlsbGEtY2FsZW5kYXItaGVhZGVyIHZhbmlsbGEtY2FsZW5kYXItaGVhZGVyLW1haW5cIj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cInZhbmlsbGEtY2FsZW5kYXItaGVhZGVyLXRpdGxlXCI+XG5cdFx0XHRcdFx0JHt0aGlzLmN1cnJlbnRUaXRsZX1cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ2YW5pbGxhLWNhbGVuZGFyLWhlYWRlci1jb250cm9sc1wiPlxuXHRcdFx0XHQ8YnV0dG9uIHR5cGU9XCJidXR0b25cIlxuXHRcdFx0XHRcdGNsYXNzPVwidmFuaWxsYS1jYWxlbmRhci1hcnJvdyB2YW5pbGxhLWNhbGVuZGFyLWFycm93X3ByZXZcIlxuXHRcdFx0XHRcdHRpdGxlPVwicHJldlwiPlxuXHRcdFx0XHQ8L2J1dHRvbj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cInZhbmlsbGEtY2FsZW5kYXItaGVhZGVyX19jb250ZW50XCI+XG5cdFx0XHRcdFx0PGIgY2xhc3M9XCJ2YW5pbGxhLWNhbGVuZGFyLW1vbnRoJHt0aGlzLnNldHRpbmdzLnNlbGVjdGlvbi5tb250aCA/ICcnIDogJyB2YW5pbGxhLWNhbGVuZGFyLW1vbnRoX2Rpc2FibGVkJ31cIj48L2I+XG5cdFx0XHRcdFx0PGIgY2xhc3M9XCJ2YW5pbGxhLWNhbGVuZGFyLXllYXIke3RoaXMuc2V0dGluZ3Muc2VsZWN0aW9uLnllYXIgPyAnJyA6ICcgdmFuaWxsYS1jYWxlbmRhci15ZWFyX2Rpc2FibGVkJ31cIj48L2I+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8YnV0dG9uIHR5cGU9XCJidXR0b25cIlxuXHRcdFx0XHRcdGNsYXNzPVwidmFuaWxsYS1jYWxlbmRhci1hcnJvdyB2YW5pbGxhLWNhbGVuZGFyLWFycm93X25leHRcIlxuXHRcdFx0XHRcdHRpdGxlPVwibmV4dFwiPlxuXHRcdFx0XHQ8L2J1dHRvbj5cblx0XHRcdDwvZGl2PlxuXHRcdFx0JHt0aGlzLnNldHRpbmdzLnZpc2liaWxpdHkud2Vla051bWJlcnMgPyBgXG5cdFx0XHQ8ZGl2IGNsYXNzPVwidmFuaWxsYS1jYWxlbmRhci1jb2x1bW5cIj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cInZhbmlsbGEtY2FsZW5kYXItY29sdW1uX190aXRsZVwiPiM8L2Rpdj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cInZhbmlsbGEtY2FsZW5kYXItY29sdW1uX19jb250ZW50IHZhbmlsbGEtY2FsZW5kYXItd2Vlay1udW1iZXJzXCI+PC9kaXY+XG5cdFx0XHQ8L2Rpdj5cblx0XHRcdGAgOiAnJ31cblx0XHRcdDxkaXYgY2xhc3M9XCJ2YW5pbGxhLWNhbGVuZGFyLWNvbnRlbnRcIj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cInZhbmlsbGEtY2FsZW5kYXItd2Vla1wiPjwvZGl2PlxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwidmFuaWxsYS1jYWxlbmRhci1kYXlzXCI+PC9kaXY+XG5cdFx0XHQ8L2Rpdj5cblx0XHRgO1xuXHRcdH0gZWxzZSBpZiAodGhpcy5jdXJyZW50VHlwZSA9PT0gJ21vbnRoJykge1xuXHRcdFx0dGhpcy5IVE1MRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCd2YW5pbGxhLWNhbGVuZGFyX2RlZmF1bHQnKTtcblx0XHRcdHRoaXMuSFRNTEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndmFuaWxsYS1jYWxlbmRhcl9tb250aCcpO1xuXHRcdFx0dGhpcy5IVE1MRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCd2YW5pbGxhLWNhbGVuZGFyX3llYXInKTtcblx0XHRcdHRoaXMuSFRNTEVsZW1lbnQuaW5uZXJIVE1MID0gYFxuXHRcdFx0PGRpdiBjbGFzcz1cInZhbmlsbGEtY2FsZW5kYXItaGVhZGVyXCI+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ2YW5pbGxhLWNhbGVuZGFyLWhlYWRlcl9fY29udGVudFwiPlxuXHRcdFx0XHRcdDxiIGNsYXNzPVwidmFuaWxsYS1jYWxlbmRhci1tb250aFwiPjwvYj5cblx0XHRcdFx0XHQ8YiBjbGFzcz1cInZhbmlsbGEtY2FsZW5kYXIteWVhciB2YW5pbGxhLWNhbGVuZGFyLXllYXJfbm90LWFjdGl2ZSR7dGhpcy5zZXR0aW5ncy5zZWxlY3Rpb24ueWVhciA/ICcnIDogJyB2YW5pbGxhLWNhbGVuZGFyLXllYXJfZGlzYWJsZWQnfVwiPjwvYj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHQ8L2Rpdj5cblx0XHRcdDxkaXYgY2xhc3M9XCJ2YW5pbGxhLWNhbGVuZGFyLWNvbnRlbnRcIj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cInZhbmlsbGEtY2FsZW5kYXItbW9udGhzXCI+PC9kaXY+XG5cdFx0XHQ8L2Rpdj5gO1xuXHRcdH0gZWxzZSBpZiAodGhpcy5jdXJyZW50VHlwZSA9PT0gJ3llYXInKSB7XG5cdFx0XHR0aGlzLkhUTUxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3ZhbmlsbGEtY2FsZW5kYXJfZGVmYXVsdCcpO1xuXHRcdFx0dGhpcy5IVE1MRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCd2YW5pbGxhLWNhbGVuZGFyX21vbnRoJyk7XG5cdFx0XHR0aGlzLkhUTUxFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3ZhbmlsbGEtY2FsZW5kYXJfeWVhcicpO1xuXHRcdFx0dGhpcy5IVE1MRWxlbWVudC5pbm5lckhUTUwgPSBgXG5cdFx0XHQ8ZGl2IGNsYXNzPVwidmFuaWxsYS1jYWxlbmRhci1oZWFkZXJcIj5cblx0XHRcdFx0PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCJcblx0XHRcdFx0XHRjbGFzcz1cInZhbmlsbGEtY2FsZW5kYXItYXJyb3cgdmFuaWxsYS1jYWxlbmRhci1hcnJvd19wcmV2XCJcblx0XHRcdFx0XHR0aXRsZT1cInByZXZcIj5cblx0XHRcdFx0PC9idXR0b24+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ2YW5pbGxhLWNhbGVuZGFyLWhlYWRlcl9fY29udGVudFwiPlxuXHRcdFx0XHRcdDxiIGNsYXNzPVwidmFuaWxsYS1jYWxlbmRhci1tb250aCB2YW5pbGxhLWNhbGVuZGFyLW1vbnRoX25vdC1hY3RpdmUke3RoaXMuc2V0dGluZ3Muc2VsZWN0aW9uLm1vbnRoID8gJycgOiAnIHZhbmlsbGEtY2FsZW5kYXItbW9udGhfZGlzYWJsZWQnfVwiPjwvYj5cblx0XHRcdFx0XHQ8YiBjbGFzcz1cInZhbmlsbGEtY2FsZW5kYXIteWVhclwiPjwvYj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDxidXR0b24gdHlwZT1cImJ1dHRvblwiXG5cdFx0XHRcdFx0Y2xhc3M9XCJ2YW5pbGxhLWNhbGVuZGFyLWFycm93IHZhbmlsbGEtY2FsZW5kYXItYXJyb3dfbmV4dFwiXG5cdFx0XHRcdFx0dGl0bGU9XCJuZXh0XCI+XG5cdFx0XHRcdDwvYnV0dG9uPlxuXHRcdFx0PC9kaXY+XG5cdFx0XHQ8ZGl2IGNsYXNzPVwidmFuaWxsYS1jYWxlbmRhci1jb250ZW50XCI+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ2YW5pbGxhLWNhbGVuZGFyLXllYXJzXCI+PC9kaXY+XG5cdFx0XHQ8L2Rpdj5gO1xuXHRcdH1cblx0fVxuXG5cdGdlbmVyYXRlRGF0ZShkYXRlKSB7XG5cdFx0Y29uc3QgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcblx0XHRsZXQgbW9udGggPSBkYXRlLmdldFVUQ01vbnRoKCkgKyAxO1xuXHRcdGxldCBkYXkgPSBkYXRlLmdldFVUQ0RhdGUoKTtcblxuXHRcdG1vbnRoID0gbW9udGggPCAxMCA/IGAwJHttb250aH1gIDogbW9udGg7XG5cdFx0ZGF5ID0gZGF5IDwgMTAgPyBgMCR7ZGF5fWAgOiBkYXk7XG5cblx0XHRyZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDtcblx0fVxuXG5cdGNvbnRyb2xBcnJvd3MoKSB7XG5cdFx0aWYgKCFbJ2RlZmF1bHQnLCAneWVhciddLmluY2x1ZGVzKHRoaXMuY3VycmVudFR5cGUpKSByZXR1cm47XG5cblx0XHRjb25zdCBhcnJvd1ByZXYgPSB0aGlzLkhUTUxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy52YW5pbGxhLWNhbGVuZGFyLWFycm93X3ByZXYnKTtcblx0XHRjb25zdCBhcnJvd05leHQgPSB0aGlzLkhUTUxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy52YW5pbGxhLWNhbGVuZGFyLWFycm93X25leHQnKTtcblxuXHRcdGNvbnN0IGRlZmF1bHRDb250cm9sID0gKCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMuY3VycmVudFR5cGUgIT09ICdkZWZhdWx0JykgcmV0dXJuO1xuXG5cdFx0XHRjb25zdCBpc1NlbGVjdGVkTWluTW91bnQgPSB0aGlzLnNlbGVjdGVkTW9udGggPT09IHRoaXMuZGF0ZU1pbi5nZXRVVENNb250aCgpO1xuXHRcdFx0Y29uc3QgaXNTZWxlY3RlZE1heE1vdW50ID0gdGhpcy5zZWxlY3RlZE1vbnRoID09PSB0aGlzLmRhdGVNYXguZ2V0VVRDTW9udGgoKTtcblx0XHRcdGNvbnN0IGlzU2VsZWN0ZWRNaW5ZZWFyID0gdGhpcy5zZWxlY3RlZFllYXIgPT09IHRoaXMuZGF0ZU1pbi5nZXRVVENGdWxsWWVhcigpO1xuXHRcdFx0Y29uc3QgaXNTZWxlY3RlZE1heFllYXIgPSB0aGlzLnNlbGVjdGVkWWVhciA9PT0gdGhpcy5kYXRlTWF4LmdldFVUQ0Z1bGxZZWFyKCk7XG5cblx0XHRcdGlmICgoaXNTZWxlY3RlZE1pbk1vdW50ICYmIGlzU2VsZWN0ZWRNaW5ZZWFyKSB8fCAhdGhpcy5zZXR0aW5ncy5zZWxlY3Rpb24ubW9udGgpIHtcblx0XHRcdFx0YXJyb3dQcmV2LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGFycm93UHJldi5zdHlsZS52aXNpYmlsaXR5ID0gbnVsbDtcblx0XHRcdH1cblx0XHRcdGlmICgoaXNTZWxlY3RlZE1heE1vdW50ICYmIGlzU2VsZWN0ZWRNYXhZZWFyKSB8fCAhdGhpcy5zZXR0aW5ncy5zZWxlY3Rpb24ubW9udGgpIHtcblx0XHRcdFx0YXJyb3dOZXh0LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGFycm93TmV4dC5zdHlsZS52aXNpYmlsaXR5ID0gbnVsbDtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29uc3QgeWVhckNvbnRyb2wgPSAoKSA9PiB7XG5cdFx0XHRpZiAodGhpcy5jdXJyZW50VHlwZSAhPT0gJ3llYXInKSByZXR1cm47XG5cblx0XHRcdGlmICh0aGlzLmRhdGVNaW4uZ2V0VVRDRnVsbFllYXIoKSAmJiAodGhpcy52aWV3WWVhciAtIDcpIDw9IHRoaXMuZGF0ZU1pbi5nZXRVVENGdWxsWWVhcigpKSB7XG5cdFx0XHRcdGFycm93UHJldi5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRhcnJvd1ByZXYuc3R5bGUudmlzaWJpbGl0eSA9IG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0aGlzLmRhdGVNYXguZ2V0VVRDRnVsbFllYXIoKSAmJiAodGhpcy52aWV3WWVhciArIDcpID49IHRoaXMuZGF0ZU1heC5nZXRVVENGdWxsWWVhcigpKSB7XG5cdFx0XHRcdGFycm93TmV4dC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRhcnJvd05leHQuc3R5bGUudmlzaWJpbGl0eSA9IG51bGw7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGRlZmF1bHRDb250cm9sKCk7XG5cdFx0eWVhckNvbnRyb2woKTtcblx0fVxuXG5cdHdyaXRlWWVhcigpIHtcblx0XHRjb25zdCB5ZWFyRWwgPSB0aGlzLkhUTUxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy52YW5pbGxhLWNhbGVuZGFyLXllYXInKTtcblx0XHR5ZWFyRWwuaW5uZXJUZXh0ID0gdGhpcy5zZWxlY3RlZFllYXI7XG5cdH1cblxuXHR3cml0ZU1vbnRoKCkge1xuXHRcdGNvbnN0IG1vbnRoRWwgPSB0aGlzLkhUTUxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy52YW5pbGxhLWNhbGVuZGFyLW1vbnRoJyk7XG5cdFx0bW9udGhFbC5pbm5lclRleHQgPSB0aGlzLmxvY2FsZS5tb250aHNbdGhpcy5zZWxlY3RlZE1vbnRoXTtcblx0fVxuXG5cdGNyZWF0ZVdlZWsoKSB7XG5cdFx0Y29uc3Qgd2Vla0VsID0gdGhpcy5IVE1MRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudmFuaWxsYS1jYWxlbmRhci13ZWVrJyk7XG5cdFx0Y29uc3QgdGVtcGxhdGVXZWVrRGF5RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cdFx0dGVtcGxhdGVXZWVrRGF5RWwuY2xhc3NOYW1lID0gJ3ZhbmlsbGEtY2FsZW5kYXItd2Vla19fZGF5JztcblxuXHRcdGNvbnN0IHdlZWtkYXkgPSBbLi4udGhpcy5sb2NhbGUud2Vla2RheV07XG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuaXNvODYwMSkgd2Vla2RheS5wdXNoKHdlZWtkYXkuc2hpZnQoKSk7XG5cblx0XHR3ZWVrRWwuaW5uZXJIVE1MID0gJyc7XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHdlZWtkYXkubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IHdlZWtEYXlOYW1lID0gd2Vla2RheVtpXTtcblx0XHRcdGNvbnN0IHdlZWtEYXlFbCA9IHRlbXBsYXRlV2Vla0RheUVsLmNsb25lTm9kZSh0cnVlKTtcblxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MudmlzaWJpbGl0eS53ZWVrZW5kICYmIHRoaXMuc2V0dGluZ3MuaXNvODYwMSkge1xuXHRcdFx0XHRpZiAoaSA9PT0gNSB8fCBpID09PSA2KSB7XG5cdFx0XHRcdFx0d2Vla0RheUVsLmNsYXNzTGlzdC5hZGQoJ3ZhbmlsbGEtY2FsZW5kYXItd2Vla19fZGF5X3dlZWtlbmQnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0aGlzLnNldHRpbmdzLnZpc2liaWxpdHkud2Vla2VuZCAmJiAhdGhpcy5zZXR0aW5ncy5pc284NjAxKSB7XG5cdFx0XHRcdGlmIChpID09PSAwIHx8IGkgPT09IDYpIHtcblx0XHRcdFx0XHR3ZWVrRGF5RWwuY2xhc3NMaXN0LmFkZCgndmFuaWxsYS1jYWxlbmRhci13ZWVrX19kYXlfd2Vla2VuZCcpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHdlZWtEYXlFbC5pbm5lclRleHQgPSBgJHt3ZWVrRGF5TmFtZX1gO1xuXHRcdFx0d2Vla0VsLmFwcGVuZCh3ZWVrRGF5RWwpO1xuXHRcdH1cblx0fVxuXG5cdGdldFdlZWtOdW1iZXIoZGF0ZSkge1xuXHRcdGNvbnN0IGRheSA9IG5ldyBEYXRlKGRhdGUpLmdldFVUQ0RhdGUoKTtcblx0XHRjb25zdCBtb250aCA9IG5ldyBEYXRlKGRhdGUpLmdldFVUQ01vbnRoKCk7XG5cdFx0Y29uc3QgeWVhciA9IG5ldyBEYXRlKGRhdGUpLmdldFVUQ0Z1bGxZZWFyKCk7XG5cdFx0Y29uc3QgY29ycmVjdERhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTtcblx0XHRjb25zdCB5ZWFyU3RhcnQgPSBuZXcgRGF0ZShEYXRlLlVUQyhjb3JyZWN0RGF0ZS5nZXRVVENGdWxsWWVhcigpLCAwLCAxKSk7XG5cdFx0Y29uc3Qgd2Vla051bWJlciA9IE1hdGguY2VpbCgoKChjb3JyZWN0RGF0ZSAtIHllYXJTdGFydCkgLyA4NjQwMDAwMCkgKyAxKSAvIDcpO1xuXHRcdHJldHVybiB7XG5cdFx0XHR5ZWFyOiBjb3JyZWN0RGF0ZS5nZXRVVENGdWxsWWVhcigpLFxuXHRcdFx0d2Vlazogd2Vla051bWJlcixcblx0XHR9O1xuXHR9XG5cblx0Y3JlYXRlV2Vla051bWJlcnMoZmlyc3REYXlXZWVrLCBkYXlzU2VsZWN0ZWRNb250aCkge1xuXHRcdGlmICghdGhpcy5zZXR0aW5ncy52aXNpYmlsaXR5LndlZWtOdW1iZXJzKSByZXR1cm47XG5cdFx0Y29uc3Qgd2Vla051bWJlcnNFbCA9IHRoaXMuSFRNTEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnZhbmlsbGEtY2FsZW5kYXItd2Vlay1udW1iZXJzJyk7XG5cdFx0Y29uc3QgZGF5c0VsID0gdGhpcy5IVE1MRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudmFuaWxsYS1jYWxlbmRhci1kYXknKTtcblx0XHRjb25zdCBjb3VudFdlZWsgPSBNYXRoLmNlaWwoKGZpcnN0RGF5V2VlayArIGRheXNTZWxlY3RlZE1vbnRoKSAvIDcpO1xuXHRcdGNvbnN0IHRlbXBsYXRlV2Vla051bWJlckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuXHRcdHRlbXBsYXRlV2Vla051bWJlckVsLmNsYXNzTmFtZSA9ICd2YW5pbGxhLWNhbGVuZGFyLXdlZWstbnVtYmVyJztcblxuXHRcdHdlZWtOdW1iZXJzRWwuaW5uZXJIVE1MID0gJyc7XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50V2VlazsgaSsrKSB7XG5cdFx0XHRjb25zdCB3ZWVrTnVtYmVyID0gdGhpcy5nZXRXZWVrTnVtYmVyKGRheXNFbFtpICogN10uZGF0YXNldC5jYWxlbmRhckRheSk7XG5cdFx0XHRjb25zdCB3ZWVrTnVtYmVyRWwgPSB0ZW1wbGF0ZVdlZWtOdW1iZXJFbC5jbG9uZU5vZGUodHJ1ZSk7XG5cdFx0XHR3ZWVrTnVtYmVyRWwuaW5uZXJUZXh0ID0gYCR7d2Vla051bWJlci53ZWVrfWA7XG5cdFx0XHR3ZWVrTnVtYmVyRWwuZGF0YXNldC5jYWxlbmRhclllYXIgPSBgJHt3ZWVrTnVtYmVyLnllYXJ9YDtcblx0XHRcdHdlZWtOdW1iZXJzRWwuYXBwZW5kKHdlZWtOdW1iZXJFbCk7XG5cdFx0fVxuXHR9XG5cblx0Y3JlYXRlUG9wdXAoZGF5c0VsKSB7XG5cdFx0aWYgKCF0aGlzLnBvcHVwcykgcmV0dXJuO1xuXG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG5cdFx0Zm9yIChjb25zdCBkYXkgaW4gdGhpcy5wb3B1cHMpIHtcblx0XHRcdGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLnBvcHVwcywgZGF5KSkge1xuXHRcdFx0XHRjb25zdCBkYXlFbCA9IGRheXNFbC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1jYWxlbmRhci1kYXk9XCIke2RheX1cIl1gKTtcblx0XHRcdFx0aWYgKCFkYXlFbCkgcmV0dXJuO1xuXG5cdFx0XHRcdGNvbnN0IGRheUluZm8gPSB0aGlzLnBvcHVwc1tkYXldO1xuXHRcdFx0XHRkYXlFbC5jbGFzc0xpc3QuYWRkKGRheUluZm8ubW9kaWZpZXIpO1xuXHRcdFx0XHRkYXlFbC5pbm5lckhUTUwgKz0gYDxkaXYgY2xhc3M9XCJ2YW5pbGxhLWNhbGVuZGFyLWRheV9fcG9wdXBcIj4ke2RheUluZm8uaHRtbH08L2Rpdj5gO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGNyZWF0ZURheXMoKSB7XG5cdFx0Y29uc3QgZmlyc3REYXkgPSBuZXcgRGF0ZShEYXRlLlVUQyh0aGlzLnNlbGVjdGVkWWVhciwgdGhpcy5zZWxlY3RlZE1vbnRoLCAxKSk7XG5cdFx0Y29uc3QgZGF5c1NlbGVjdGVkTW9udGggPSBuZXcgRGF0ZShEYXRlLlVUQyh0aGlzLnNlbGVjdGVkWWVhciwgdGhpcy5zZWxlY3RlZE1vbnRoICsgMSwgMCkpLmdldFVUQ0RhdGUoKTtcblxuXHRcdGxldCBmaXJzdERheVdlZWsgPSBOdW1iZXIoZmlyc3REYXkuZ2V0VVRDRGF5KCkpO1xuXHRcdGlmICh0aGlzLnNldHRpbmdzLmlzbzg2MDEpIGZpcnN0RGF5V2VlayA9IE51bWJlcigoZmlyc3REYXkuZ2V0VVRDRGF5KCkgIT09IDAgPyBmaXJzdERheS5nZXRVVENEYXkoKSA6IDcpIC0gMSk7XG5cblx0XHRjb25zdCBkYXlzRWwgPSB0aGlzLkhUTUxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy52YW5pbGxhLWNhbGVuZGFyLWRheXMnKTtcblx0XHRjb25zdCB0ZW1wbGF0ZURheUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0dGVtcGxhdGVEYXlFbC5jbGFzc05hbWUgPSAndmFuaWxsYS1jYWxlbmRhci1kYXknO1xuXG5cdFx0aWYgKFsnc2luZ2xlJywgJ211bHRpcGxlJywgJ211bHRpcGxlLXJhbmdlZCddLmluY2x1ZGVzKHRoaXMuc2V0dGluZ3Muc2VsZWN0aW9uLmRheSkpIHtcblx0XHRcdGRheXNFbC5jbGFzc0xpc3QuYWRkKCd2YW5pbGxhLWNhbGVuZGFyLWRheXNfc2VsZWN0aW5nJyk7XG5cdFx0fVxuXG5cdFx0ZGF5c0VsLmlubmVySFRNTCA9ICcnO1xuXG5cdFx0Y29uc3Qgc2V0RGF5TW9kaWZpZXIgPSAoZGF5RWwsIGRheUlELCBkYXRlKSA9PiB7XG5cdFx0XHQvLyBpZiB3ZWVrZW5kXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy52aXNpYmlsaXR5LndlZWtlbmQgJiYgKGRheUlEID09PSAwIHx8IGRheUlEID09PSA2KSkge1xuXHRcdFx0XHRkYXlFbC5jbGFzc0xpc3QuYWRkKCd2YW5pbGxhLWNhbGVuZGFyLWRheV93ZWVrZW5kJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGlmIGhvbGlkYXlzXG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnNldHRpbmdzLnNlbGVjdGVkLmhvbGlkYXlzKSkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLnNlbGVjdGVkLmhvbGlkYXlzLmZvckVhY2goKGhvbGlkYXkpID0+IHtcblx0XHRcdFx0XHRpZiAoaG9saWRheSA9PT0gZGF0ZSkge1xuXHRcdFx0XHRcdFx0ZGF5RWwuY2xhc3NMaXN0LmFkZCgndmFuaWxsYS1jYWxlbmRhci1kYXlfaG9saWRheScpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGlmIHRvZGF5XG5cdFx0XHRsZXQgdGhpc1RvZGF5ID0gdGhpcy5kYXRlLnRvZGF5LmdldFVUQ0RhdGUoKTtcblx0XHRcdGxldCB0aGlzTW9udGggPSB0aGlzLmRhdGUudG9kYXkuZ2V0VVRDTW9udGgoKSArIDE7XG5cdFx0XHR0aGlzVG9kYXkgPSB0aGlzVG9kYXkgPCAxMCA/IGAwJHt0aGlzVG9kYXl9YCA6IHRoaXNUb2RheTtcblx0XHRcdHRoaXNNb250aCA9IHRoaXNNb250aCA8IDEwID8gYDAke3RoaXNNb250aH1gIDogdGhpc01vbnRoO1xuXG5cdFx0XHRjb25zdCB0aGlzRGF5ID0gYCR7dGhpcy5kYXRlLnRvZGF5LmdldFVUQ0Z1bGxZZWFyKCl9LSR7dGhpc01vbnRofS0ke3RoaXNUb2RheX1gO1xuXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy52aXNpYmlsaXR5LnRvZGF5ICYmIGRheUVsLmRhdGFzZXQuY2FsZW5kYXJEYXkgPT09IHRoaXNEYXkpIHtcblx0XHRcdFx0ZGF5RWwuY2xhc3NMaXN0LmFkZCgndmFuaWxsYS1jYWxlbmRhci1kYXlfdG9kYXknKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gaWYgc2VsZWN0ZWQgZGF5XG5cdFx0XHRpZiAodGhpcy5zZWxlY3RlZERhdGVzLmZpbmQoKHNlbGVjdGVkRGF0ZSkgPT4gc2VsZWN0ZWREYXRlID09PSBkYXRlKSkge1xuXHRcdFx0XHRkYXlFbC5jbGFzc0xpc3QuYWRkKCd2YW5pbGxhLWNhbGVuZGFyLWRheV9zZWxlY3RlZCcpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBpZiBhY3RpdmUgZGF5XG5cdFx0XHRpZiAodGhpcy5hY3RpdmVEYXRlcy5maW5kKChzZWxlY3RlZERhdGUpID0+IHNlbGVjdGVkRGF0ZSA9PT0gZGF0ZSkpIHtcblx0XHRcdFx0ZGF5RWwuY2xhc3NMaXN0LmFkZCgndmFuaWxsYS1jYWxlbmRhci1kYXlfYWN0aXZlJyk7XG5cdFx0XHR9XG5cblxuXHRcdFx0Ly8gaWYgcmFuZ2UgbWluL21heFxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MucmFuZ2UubWluID4gZGF0ZSB8fCB0aGlzLnNldHRpbmdzLnJhbmdlLm1heCA8IGRhdGUpIHtcblx0XHRcdFx0ZGF5RWwuY2xhc3NMaXN0LmFkZCgndmFuaWxsYS1jYWxlbmRhci1kYXlfZGlzYWJsZWQnKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gaWYgcmFuZ2UgdmFsdWVzXG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnNldHRpbmdzLnJhbmdlLmRpc2FibGVkKSkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLnJhbmdlLmRpc2FibGVkLmZvckVhY2goKGRhdGVEaXNhYmxlZCkgPT4ge1xuXHRcdFx0XHRcdGlmIChkYXRlRGlzYWJsZWQgPT09IGRhdGUpIHtcblx0XHRcdFx0XHRcdGRheUVsLmNsYXNzTGlzdC5hZGQoJ3ZhbmlsbGEtY2FsZW5kYXItZGF5X2Rpc2FibGVkJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29uc3QgcHJldk1vbnRoID0gKCkgPT4ge1xuXHRcdFx0Y29uc3QgcHJldk1vbnRoRGF5cyA9IG5ldyBEYXRlKERhdGUuVVRDKHRoaXMuc2VsZWN0ZWRZZWFyLCB0aGlzLnNlbGVjdGVkTW9udGgsIDApKS5nZXRVVENEYXRlKCk7XG5cdFx0XHRsZXQgZGF5ID0gcHJldk1vbnRoRGF5cyAtIGZpcnN0RGF5V2Vlaztcblx0XHRcdGxldCB5ZWFyID0gdGhpcy5zZWxlY3RlZFllYXI7XG5cdFx0XHRsZXQgbW9udGggPSB0aGlzLnNlbGVjdGVkTW9udGg7XG5cblx0XHRcdGlmICh0aGlzLnNlbGVjdGVkTW9udGggPT09IDApIHtcblx0XHRcdFx0bW9udGggPSB0aGlzLmxvY2FsZS5tb250aHMubGVuZ3RoO1xuXHRcdFx0XHR5ZWFyID0gdGhpcy5zZWxlY3RlZFllYXIgLSAxO1xuXHRcdFx0fSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkTW9udGggPCAxMCkge1xuXHRcdFx0XHRtb250aCA9IGAwJHt0aGlzLnNlbGVjdGVkTW9udGh9YDtcblx0XHRcdH1cblxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBmaXJzdERheVdlZWs7IGkrKykge1xuXHRcdFx0XHRkYXkgKz0gMTtcblxuXHRcdFx0XHRjb25zdCBkYXRlID0gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDtcblx0XHRcdFx0Y29uc3QgZGF5SURDdXJyZW50ID0gbmV3IERhdGUoRGF0ZS5VVEModGhpcy5zZWxlY3RlZFllYXIsIHRoaXMuc2VsZWN0ZWRNb250aCwgZGF5IC0gMSkpO1xuXHRcdFx0XHRjb25zdCBwcmV2TW9udGhJRCA9IGRheUlEQ3VycmVudC5nZXRVVENNb250aCgpIC0gMTtcblx0XHRcdFx0Y29uc3QgZGF5SUQgPSBuZXcgRGF0ZShEYXRlLlVUQyh0aGlzLnNlbGVjdGVkWWVhciwgcHJldk1vbnRoSUQsIGRheSkpLmdldFVUQ0RheSgpO1xuXG5cdFx0XHRcdGNvbnN0IGRheUVsID0gdGVtcGxhdGVEYXlFbC5jbG9uZU5vZGUodHJ1ZSk7XG5cdFx0XHRcdGRheUVsLmNsYXNzTGlzdC5hZGQoJ3ZhbmlsbGEtY2FsZW5kYXItZGF5X3ByZXYnKTtcblx0XHRcdFx0ZGF5RWwuaW5uZXJUZXh0ID0gYCR7ZGF5fWA7XG5cdFx0XHRcdGRheUVsLmRhdGFzZXQuY2FsZW5kYXJEYXkgPSBkYXRlO1xuXG5cdFx0XHRcdHNldERheU1vZGlmaWVyKGRheUVsLCBkYXlJRCwgZGF0ZSk7XG5cdFx0XHRcdGRheXNFbC5hcHBlbmQoZGF5RWwpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb25zdCBzZWxlY3RlZE1vbnRoID0gKCkgPT4ge1xuXHRcdFx0Zm9yIChsZXQgaSA9IDE7IGkgPD0gZGF5c1NlbGVjdGVkTW9udGg7IGkrKykge1xuXHRcdFx0XHRjb25zdCBkYXkgPSBuZXcgRGF0ZShEYXRlLlVUQyh0aGlzLnNlbGVjdGVkWWVhciwgdGhpcy5zZWxlY3RlZE1vbnRoLCBpKSk7XG5cblx0XHRcdFx0Y29uc3QgZGF0ZSA9IHRoaXMuZ2VuZXJhdGVEYXRlKGRheSk7XG5cdFx0XHRcdGNvbnN0IGRheUlEID0gZGF5LmdldFVUQ0RheSgpO1xuXG5cdFx0XHRcdGNvbnN0IGRheUVsID0gdGVtcGxhdGVEYXlFbC5jbG9uZU5vZGUodHJ1ZSk7XG5cdFx0XHRcdGRheUVsLmlubmVyVGV4dCA9IGAke2l9YDtcblx0XHRcdFx0ZGF5RWwuZGF0YXNldC5jYWxlbmRhckRheSA9IGRhdGU7XG5cblx0XHRcdFx0c2V0RGF5TW9kaWZpZXIoZGF5RWwsIGRheUlELCBkYXRlKTtcblx0XHRcdFx0ZGF5c0VsLmFwcGVuZChkYXlFbCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnN0IG5leHRNb250aCA9ICgpID0+IHtcblx0XHRcdGNvbnN0IHRvdGFsID0gZmlyc3REYXlXZWVrICsgZGF5c1NlbGVjdGVkTW9udGg7XG5cdFx0XHRjb25zdCByb3dzID0gTWF0aC5jZWlsKHRvdGFsIC8gdGhpcy5sb2NhbGUud2Vla2RheS5sZW5ndGgpO1xuXHRcdFx0Y29uc3QgbmV4dERheXMgPSAodGhpcy5sb2NhbGUud2Vla2RheS5sZW5ndGggKiByb3dzKSAtIHRvdGFsO1xuXG5cdFx0XHRsZXQgeWVhciA9IHRoaXMuc2VsZWN0ZWRZZWFyO1xuXHRcdFx0bGV0IG1vbnRoID0gdGhpcy5zZWxlY3RlZE1vbnRoICsgMjtcblxuXHRcdFx0aWYgKCh0aGlzLnNlbGVjdGVkTW9udGggKyAxKSA9PT0gdGhpcy5sb2NhbGUubW9udGhzLmxlbmd0aCkge1xuXHRcdFx0XHRtb250aCA9ICcwMSc7XG5cdFx0XHRcdHllYXIgPSB0aGlzLnNlbGVjdGVkWWVhciArIDE7XG5cdFx0XHR9IGVsc2UgaWYgKCh0aGlzLnNlbGVjdGVkTW9udGggKyAyKSA8IDEwKSB7XG5cdFx0XHRcdG1vbnRoID0gYDAke3RoaXMuc2VsZWN0ZWRNb250aCArIDJ9YDtcblx0XHRcdH1cblxuXHRcdFx0Zm9yIChsZXQgaSA9IDE7IGkgPD0gbmV4dERheXM7IGkrKykge1xuXHRcdFx0XHRjb25zdCBkYXkgPSBpIDwgMTAgPyBgMCR7aX1gIDogaTtcblxuXHRcdFx0XHRjb25zdCBkYXRlID0gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDtcblx0XHRcdFx0Y29uc3QgZGF5SURDdXJyZW50ID0gbmV3IERhdGUoRGF0ZS5VVEModGhpcy5zZWxlY3RlZFllYXIsIHRoaXMuc2VsZWN0ZWRNb250aCwgaSkpO1xuXHRcdFx0XHRjb25zdCBuZXh0TW9udGhJRCA9IGRheUlEQ3VycmVudC5nZXRVVENNb250aCgpICsgMTtcblx0XHRcdFx0Y29uc3QgZGF5SUQgPSBuZXcgRGF0ZShEYXRlLlVUQyh0aGlzLnNlbGVjdGVkWWVhciwgbmV4dE1vbnRoSUQsIGkpKS5nZXRVVENEYXkoKTtcblxuXHRcdFx0XHRjb25zdCBkYXlFbCA9IHRlbXBsYXRlRGF5RWwuY2xvbmVOb2RlKHRydWUpO1xuXHRcdFx0XHRkYXlFbC5jbGFzc0xpc3QuYWRkKCd2YW5pbGxhLWNhbGVuZGFyLWRheV9uZXh0Jyk7XG5cdFx0XHRcdGRheUVsLmlubmVyVGV4dCA9IGAke2l9YDtcblx0XHRcdFx0ZGF5RWwuZGF0YXNldC5jYWxlbmRhckRheSA9IGRhdGU7XG5cblx0XHRcdFx0c2V0RGF5TW9kaWZpZXIoZGF5RWwsIGRheUlELCBkYXRlKTtcblx0XHRcdFx0ZGF5c0VsLmFwcGVuZChkYXlFbCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHByZXZNb250aCgpO1xuXHRcdHNlbGVjdGVkTW9udGgoKTtcblx0XHRuZXh0TW9udGgoKTtcblx0XHR0aGlzLmNyZWF0ZVBvcHVwKGRheXNFbCk7XG5cdFx0dGhpcy5jcmVhdGVXZWVrTnVtYmVycyhmaXJzdERheVdlZWssIGRheXNTZWxlY3RlZE1vbnRoKTtcblx0fVxuXG5cdGNoYW5nZU1vbnRoKHJvdXRlKSB7XG5cdFx0Y29uc3QgbGFzdE1vbnRoID0gdGhpcy5sb2NhbGUubW9udGhzLmxlbmd0aCAtIDE7XG5cblx0XHRzd2l0Y2ggKHJvdXRlKSB7XG5cdFx0XHRjYXNlICdwcmV2Jzpcblx0XHRcdFx0aWYgKHRoaXMuc2VsZWN0ZWRNb250aCAhPT0gMCkge1xuXHRcdFx0XHRcdHRoaXMuc2VsZWN0ZWRNb250aCAtPSAxO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHRoaXMuc2V0dGluZ3Muc2VsZWN0aW9uLnllYXIpIHtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkWWVhciAtPSAxO1xuXHRcdFx0XHRcdHRoaXMuc2VsZWN0ZWRNb250aCA9IGxhc3RNb250aDtcblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ25leHQnOlxuXHRcdFx0XHRpZiAodGhpcy5zZWxlY3RlZE1vbnRoICE9PSBsYXN0TW9udGgpIHtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkTW9udGggKz0gMTtcblx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLnNldHRpbmdzLnNlbGVjdGlvbi55ZWFyKSB7XG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RlZFllYXIgKz0gMTtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkTW9udGggPSAwO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Ly8gbm8gZGVmYXVsdFxuXHRcdH1cblxuXHRcdHRoaXMuc2V0dGluZ3Muc2VsZWN0ZWQubW9udGggPSB0aGlzLnNlbGVjdGVkTW9udGg7XG5cblx0XHR0aGlzLmNvbnRyb2xBcnJvd3MoKTtcblx0XHR0aGlzLndyaXRlWWVhcigpO1xuXHRcdHRoaXMud3JpdGVNb250aCgpO1xuXHRcdHRoaXMuY3JlYXRlRGF5cygpO1xuXHR9XG5cblx0Y3JlYXRlWWVhcnMoKSB7XG5cdFx0dGhpcy5jdXJyZW50VHlwZSA9ICd5ZWFyJztcblx0XHR0aGlzLmNyZWF0ZURPTSgpO1xuXHRcdHRoaXMuY29udHJvbEFycm93cygpO1xuXHRcdHRoaXMud3JpdGVZZWFyKCk7XG5cdFx0dGhpcy53cml0ZU1vbnRoKCk7XG5cblx0XHRjb25zdCB5ZWFyc0VsID0gdGhpcy5IVE1MRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudmFuaWxsYS1jYWxlbmRhci15ZWFycycpO1xuXHRcdGlmICh0aGlzLnNldHRpbmdzLnNlbGVjdGlvbi55ZWFyKSB5ZWFyc0VsLmNsYXNzTGlzdC5hZGQoJ3ZhbmlsbGEtY2FsZW5kYXIteWVhcnNfc2VsZWN0aW5nJyk7XG5cdFx0Y29uc3QgdGVtcGxhdGVZZWFyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cdFx0dGVtcGxhdGVZZWFyRWwuY2xhc3NOYW1lID0gJ3ZhbmlsbGEtY2FsZW5kYXIteWVhcnNfX3llYXInO1xuXG5cdFx0Zm9yIChsZXQgaSA9IHRoaXMudmlld1llYXIgLSA3OyBpIDwgdGhpcy52aWV3WWVhciArIDg7IGkrKykge1xuXHRcdFx0Y29uc3QgeWVhciA9IGk7XG5cdFx0XHRjb25zdCB5ZWFyRWwgPSB0ZW1wbGF0ZVllYXJFbC5jbG9uZU5vZGUodHJ1ZSk7XG5cblx0XHRcdGlmICh5ZWFyID09PSB0aGlzLnNlbGVjdGVkWWVhcikge1xuXHRcdFx0XHR5ZWFyRWwuY2xhc3NMaXN0LmFkZCgndmFuaWxsYS1jYWxlbmRhci15ZWFyc19feWVhcl9zZWxlY3RlZCcpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHllYXIgPCB0aGlzLmRhdGVNaW4uZ2V0VVRDRnVsbFllYXIoKSkge1xuXHRcdFx0XHR5ZWFyRWwuY2xhc3NMaXN0LmFkZCgndmFuaWxsYS1jYWxlbmRhci15ZWFyc19feWVhcl9kaXNhYmxlZCcpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHllYXIgPiB0aGlzLmRhdGVNYXguZ2V0VVRDRnVsbFllYXIoKSkge1xuXHRcdFx0XHR5ZWFyRWwuY2xhc3NMaXN0LmFkZCgndmFuaWxsYS1jYWxlbmRhci15ZWFyc19feWVhcl9kaXNhYmxlZCcpO1xuXHRcdFx0fVxuXG5cdFx0XHR5ZWFyRWwuZGF0YXNldC5jYWxlbmRhclllYXIgPSB5ZWFyO1xuXHRcdFx0eWVhckVsLmlubmVyVGV4dCA9IGAke3llYXJ9YDtcblx0XHRcdHllYXJzRWwuYXBwZW5kKHllYXJFbCk7XG5cdFx0fVxuXHR9XG5cblx0Y3JlYXRlTW9udGhzKCkge1xuXHRcdHRoaXMuY3VycmVudFR5cGUgPSAnbW9udGgnO1xuXHRcdHRoaXMuY3JlYXRlRE9NKCk7XG5cdFx0dGhpcy53cml0ZVllYXIoKTtcblx0XHR0aGlzLndyaXRlTW9udGgoKTtcblxuXHRcdGNvbnN0IG1vbnRoc0VsID0gdGhpcy5IVE1MRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudmFuaWxsYS1jYWxlbmRhci1tb250aHMnKTtcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5zZWxlY3Rpb24ubW9udGgpIG1vbnRoc0VsLmNsYXNzTGlzdC5hZGQoJ3ZhbmlsbGEtY2FsZW5kYXItbW9udGhzX3NlbGVjdGluZycpO1xuXG5cdFx0Y29uc3QgdGVtcGxhdGVNb250aEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuXHRcdHRlbXBsYXRlTW9udGhFbC5jbGFzc05hbWUgPSAndmFuaWxsYS1jYWxlbmRhci1tb250aHNfX21vbnRoJztcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sb2NhbGUubW9udGhzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBtb250aCA9IHRoaXMubG9jYWxlLm1vbnRoc1tpXTtcblx0XHRcdGNvbnN0IG1vbnRoRWwgPSB0ZW1wbGF0ZU1vbnRoRWwuY2xvbmVOb2RlKHRydWUpO1xuXG5cdFx0XHRpZiAoaSA9PT0gdGhpcy5zZWxlY3RlZE1vbnRoKSB7XG5cdFx0XHRcdG1vbnRoRWwuY2xhc3NMaXN0LmFkZCgndmFuaWxsYS1jYWxlbmRhci1tb250aHNfX21vbnRoX3NlbGVjdGVkJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoaSA8IHRoaXMuZGF0ZU1pbi5nZXRVVENNb250aCgpICYmIHRoaXMuc2VsZWN0ZWRZZWFyID09PSB0aGlzLmRhdGVNaW4uZ2V0VVRDRnVsbFllYXIoKSkge1xuXHRcdFx0XHRtb250aEVsLmNsYXNzTGlzdC5hZGQoJ3ZhbmlsbGEtY2FsZW5kYXItbW9udGhzX19tb250aF9kaXNhYmxlZCcpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGkgPiB0aGlzLmRhdGVNYXguZ2V0VVRDTW9udGgoKSAmJiB0aGlzLnNlbGVjdGVkWWVhciA9PT0gdGhpcy5kYXRlTWF4LmdldFVUQ0Z1bGxZZWFyKCkpIHtcblx0XHRcdFx0bW9udGhFbC5jbGFzc0xpc3QuYWRkKCd2YW5pbGxhLWNhbGVuZGFyLW1vbnRoc19fbW9udGhfZGlzYWJsZWQnKTtcblx0XHRcdH1cblxuXHRcdFx0bW9udGhFbC5kYXRhc2V0LmNhbGVuZGFyTW9udGggPSBpO1xuXG5cdFx0XHRtb250aEVsLnRpdGxlID0gYCR7bW9udGh9YDtcblx0XHRcdG1vbnRoRWwuaW5uZXJUZXh0ID0gYCR7dGhpcy5zZXR0aW5ncy52aXNpYmlsaXR5Lm1vbnRoU2hvcnQgPyBtb250aC5zdWJzdHJpbmcoMCwgMykgOiBtb250aH1gO1xuXHRcdFx0bW9udGhzRWwuYXBwZW5kKG1vbnRoRWwpO1xuXHRcdH1cblx0fVxuXG5cdGdldExvY2FsZSgpIHtcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5sYW5nID09PSAnZGVmaW5lJykgcmV0dXJuO1xuXG5cdFx0dGhpcy5sb2NhbGUud2Vla2RheSA9IFtdO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgNzsgaSsrKSB7XG5cdFx0XHRsZXQgd2Vla2RheSA9IG5ldyBEYXRlKDAsIDAsIGkpLnRvTG9jYWxlU3RyaW5nKHRoaXMuc2V0dGluZ3MubGFuZywgeyB3ZWVrZGF5OiAnc2hvcnQnIH0pO1xuXHRcdFx0d2Vla2RheSA9IGAke3dlZWtkYXkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCl9JHt3ZWVrZGF5LnN1YnN0cmluZygxLCB3ZWVrZGF5Lmxlbmd0aCl9YDtcblx0XHRcdHdlZWtkYXkgPSB3ZWVrZGF5LnJlcGxhY2UoL1xcLi8sICcnKTtcblx0XHRcdHRoaXMubG9jYWxlLndlZWtkYXkucHVzaCh3ZWVrZGF5KTtcblx0XHR9XG5cblx0XHR0aGlzLmxvY2FsZS5tb250aHMgPSBbXTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IDEyOyBpKyspIHtcblx0XHRcdGxldCBtb250aCA9IG5ldyBEYXRlKDAsIGkpLnRvTG9jYWxlU3RyaW5nKHRoaXMuc2V0dGluZ3MubGFuZywgeyBtb250aDogJ2xvbmcnIH0pO1xuXHRcdFx0bW9udGggPSBgJHttb250aC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKX0ke21vbnRoLnN1YnN0cmluZygxLCBtb250aC5sZW5ndGgpfWA7XG5cdFx0XHRtb250aCA9IG1vbnRoLnJlcGxhY2UoL1xcLi8sICcnKTtcblx0XHRcdHRoaXMubG9jYWxlLm1vbnRocy5wdXNoKG1vbnRoKTtcblx0XHR9XG5cdH1cblxuXHR1cGRhdGUoKSB7XG5cdFx0dGhpcy5zZXRWYXJpYWJsZXNEYXRlcygpO1xuXHRcdHRoaXMuY3JlYXRlRE9NKCk7XG5cdFx0dGhpcy5jb250cm9sQXJyb3dzKCk7XG5cdFx0dGhpcy5nZXRMb2NhbGUoKTtcblx0XHR0aGlzLndyaXRlWWVhcigpO1xuXHRcdHRoaXMud3JpdGVNb250aCgpO1xuXHRcdGlmICh0aGlzLmN1cnJlbnRUeXBlID09PSAnZGVmYXVsdCcpIHtcblx0XHRcdHRoaXMuY3JlYXRlV2VlaygpO1xuXHRcdFx0dGhpcy5jcmVhdGVEYXlzKCk7XG5cdFx0fSBlbHNlIGlmICh0aGlzLmN1cnJlbnRUeXBlID09PSAnbW9udGgnKSB7XG5cdFx0XHR0aGlzLmNyZWF0ZU1vbnRocygpO1xuXHRcdH0gZWxzZSBpZiAodGhpcy5jdXJyZW50VHlwZSA9PT0gJ3llYXInKSB7XG5cdFx0XHR0aGlzLmNyZWF0ZVllYXJzKCk7XG5cdFx0fVxuXHR9XG5cblx0Y2xpY2soKSB7XG5cdFx0dGhpcy5IVE1MRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRjb25zdCBhcnJvd0VsID0gZS50YXJnZXQuY2xvc2VzdCgnLnZhbmlsbGEtY2FsZW5kYXItYXJyb3cnKTtcblx0XHRcdGNvbnN0IGFycm93UHJldkVsID0gZS50YXJnZXQuY2xvc2VzdCgnLnZhbmlsbGEtY2FsZW5kYXItYXJyb3dfcHJldicpO1xuXHRcdFx0Y29uc3QgYXJyb3dOZXh0RWwgPSBlLnRhcmdldC5jbG9zZXN0KCcudmFuaWxsYS1jYWxlbmRhci1hcnJvd19uZXh0Jyk7XG5cdFx0XHRjb25zdCBkYXlFbCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy52YW5pbGxhLWNhbGVuZGFyLWRheScpO1xuXHRcdFx0Y29uc3QgZGF5UHJldkVsID0gZS50YXJnZXQuY2xvc2VzdCgnLnZhbmlsbGEtY2FsZW5kYXItZGF5X3ByZXYnKTtcblx0XHRcdGNvbnN0IGRheU5leHRFbCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy52YW5pbGxhLWNhbGVuZGFyLWRheV9uZXh0Jyk7XG5cdFx0XHRjb25zdCB5ZWFySGVhZGVyRWwgPSBlLnRhcmdldC5jbG9zZXN0KCcudmFuaWxsYS1jYWxlbmRhci15ZWFyJyk7XG5cdFx0XHRjb25zdCB5ZWFySXRlbUVsID0gZS50YXJnZXQuY2xvc2VzdCgnLnZhbmlsbGEtY2FsZW5kYXIteWVhcnNfX3llYXInKTtcblx0XHRcdGNvbnN0IG1vbnRoSGVhZGVyRWwgPSBlLnRhcmdldC5jbG9zZXN0KCcudmFuaWxsYS1jYWxlbmRhci1tb250aCcpO1xuXHRcdFx0Y29uc3QgbW9udGhJdGVtRWwgPSBlLnRhcmdldC5jbG9zZXN0KCcudmFuaWxsYS1jYWxlbmRhci1tb250aHNfX21vbnRoJyk7XG5cblx0XHRcdGNvbnN0IGNsaWNrRGF5U2luZ2xlID0gKCkgPT4ge1xuXHRcdFx0XHRpZiAoZGF5RWwuY2xhc3NMaXN0LmNvbnRhaW5zKCd2YW5pbGxhLWNhbGVuZGFyLWRheV9zZWxlY3RlZCcpKSB7XG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RlZERhdGVzLnNwbGljZSh0aGlzLnNlbGVjdGVkRGF0ZXMuaW5kZXhPZihkYXlFbC5kYXRhc2V0LmNhbGVuZGFyRGF5KSwgMSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RlZERhdGVzID0gW107XG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RlZERhdGVzLnB1c2goZGF5RWwuZGF0YXNldC5jYWxlbmRhckRheSk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdGNvbnN0IGNsaWNrRGF5TXVsdGlwbGUgPSAoKSA9PiB7XG5cdFx0XHRcdGlmIChkYXlFbC5jbGFzc0xpc3QuY29udGFpbnMoJ3ZhbmlsbGEtY2FsZW5kYXItZGF5X3NlbGVjdGVkJykpIHtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkRGF0ZXMuc3BsaWNlKHRoaXMuc2VsZWN0ZWREYXRlcy5pbmRleE9mKGRheUVsLmRhdGFzZXQuY2FsZW5kYXJEYXkpLCAxKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkRGF0ZXMucHVzaChkYXlFbC5kYXRhc2V0LmNhbGVuZGFyRGF5KTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0Y29uc3QgY2xpY2tEYXlNdWx0aXBsZVJhbmdlZCA9ICgpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAxKSB0aGlzLnNlbGVjdGVkRGF0ZXMgPSBbXTtcblx0XHRcdFx0dGhpcy5zZWxlY3RlZERhdGVzLnB1c2goZGF5RWwuZGF0YXNldC5jYWxlbmRhckRheSk7XG5cblx0XHRcdFx0aWYgKCF0aGlzLnNlbGVjdGVkRGF0ZXNbMV0pIHJldHVybjtcblxuXHRcdFx0XHRjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZShEYXRlLlVUQyhcblx0XHRcdFx0XHRuZXcgRGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZXNbMF0pLmdldFVUQ0Z1bGxZZWFyKCksXG5cdFx0XHRcdFx0bmV3IERhdGUodGhpcy5zZWxlY3RlZERhdGVzWzBdKS5nZXRVVENNb250aCgpLFxuXHRcdFx0XHRcdG5ldyBEYXRlKHRoaXMuc2VsZWN0ZWREYXRlc1swXSkuZ2V0VVRDRGF0ZSgpLFxuXHRcdFx0XHQpKTtcblxuXHRcdFx0XHRjb25zdCBlbmREYXRlID0gbmV3IERhdGUoRGF0ZS5VVEMoXG5cdFx0XHRcdFx0bmV3IERhdGUodGhpcy5zZWxlY3RlZERhdGVzWzFdKS5nZXRVVENGdWxsWWVhcigpLFxuXHRcdFx0XHRcdG5ldyBEYXRlKHRoaXMuc2VsZWN0ZWREYXRlc1sxXSkuZ2V0VVRDTW9udGgoKSxcblx0XHRcdFx0XHRuZXcgRGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZXNbMV0pLmdldFVUQ0RhdGUoKSxcblx0XHRcdFx0KSk7XG5cblx0XHRcdFx0Y29uc3QgYWRkU2VsZWN0ZWREYXRlID0gKGRheSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGRhdGUgPSB0aGlzLmdlbmVyYXRlRGF0ZShkYXkpO1xuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnJhbmdlLmRpc2FibGVkICYmIHRoaXMuc2V0dGluZ3MucmFuZ2UuZGlzYWJsZWQuaW5jbHVkZXMoZGF0ZSkpIHJldHVybjtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkRGF0ZXMucHVzaChkYXRlKTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHR0aGlzLnNlbGVjdGVkRGF0ZXMgPSBbXTtcblxuXHRcdFx0XHRpZiAoZW5kRGF0ZSA+IHN0YXJ0RGF0ZSkge1xuXHRcdFx0XHRcdGZvciAobGV0IGkgPSBzdGFydERhdGU7IGkgPD0gZW5kRGF0ZTsgaS5zZXRVVENEYXRlKGkuZ2V0VVRDRGF0ZSgpICsgMSkpIHtcblx0XHRcdFx0XHRcdGFkZFNlbGVjdGVkRGF0ZShpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Zm9yIChsZXQgaSA9IHN0YXJ0RGF0ZTsgaSA+PSBlbmREYXRlOyBpLnNldFVUQ0RhdGUoaS5nZXRVVENEYXRlKCkgLSAxKSkge1xuXHRcdFx0XHRcdFx0YWRkU2VsZWN0ZWREYXRlKGkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0Y29uc3QgY2xpY2tEYXkgPSAoKSA9PiB7XG5cdFx0XHRcdGlmIChbJ3NpbmdsZScsICdtdWx0aXBsZScsICdtdWx0aXBsZS1yYW5nZWQnXS5pbmNsdWRlcyh0aGlzLnNldHRpbmdzLnNlbGVjdGlvbi5kYXkpICYmIGRheUVsKSB7XG5cdFx0XHRcdFx0c3dpdGNoICh0aGlzLnNldHRpbmdzLnNlbGVjdGlvbi5kYXkpIHtcblx0XHRcdFx0XHRcdGNhc2UgJ3NpbmdsZSc6XG5cdFx0XHRcdFx0XHRcdGNsaWNrRGF5U2luZ2xlKCk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSAnbXVsdGlwbGUnOlxuXHRcdFx0XHRcdFx0XHRjbGlja0RheU11bHRpcGxlKCk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSAnbXVsdGlwbGUtcmFuZ2VkJzpcblx0XHRcdFx0XHRcdFx0Y2xpY2tEYXlNdWx0aXBsZVJhbmdlZCgpO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdC8vIG5vIGRlZmF1bHRcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAodGhpcy5hY3Rpb25zLmNsaWNrRGF5KSB0aGlzLmFjdGlvbnMuY2xpY2tEYXkoZSk7XG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5zZWxlY3RlZC5kYXRlcyA9IHRoaXMuc2VsZWN0ZWREYXRlcztcblxuXHRcdFx0XHRcdGlmIChkYXlQcmV2RWwpIHtcblx0XHRcdFx0XHRcdHRoaXMuY2hhbmdlTW9udGgoJ3ByZXYnKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGRheU5leHRFbCkge1xuXHRcdFx0XHRcdFx0dGhpcy5jaGFuZ2VNb250aCgnbmV4dCcpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aGlzLmNyZWF0ZURheXMoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZiAoYXJyb3dFbCAmJiB0aGlzLmN1cnJlbnRUeXBlICE9PSAneWVhcicgJiYgdGhpcy5jdXJyZW50VHlwZSAhPT0gJ21vbnRoJykge1xuXHRcdFx0XHRcdHRoaXMuY2hhbmdlTW9udGgoZS50YXJnZXQudGl0bGUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRjb25zdCBjbGlja1llYXIgPSAoKSA9PiB7XG5cdFx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5zZWxlY3Rpb24ueWVhcikgcmV0dXJuO1xuXHRcdFx0XHRpZiAoYXJyb3dFbCAmJiB0aGlzLmN1cnJlbnRUeXBlID09PSAneWVhcicpIHtcblx0XHRcdFx0XHRpZiAoYXJyb3dOZXh0RWwpIHtcblx0XHRcdFx0XHRcdHRoaXMudmlld1llYXIgKz0gMTU7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChhcnJvd1ByZXZFbCkge1xuXHRcdFx0XHRcdFx0dGhpcy52aWV3WWVhciAtPSAxNTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy5jcmVhdGVZZWFycygpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHRoaXMuY3VycmVudFR5cGUgIT09ICd5ZWFyJyAmJiB5ZWFySGVhZGVyRWwpIHtcblx0XHRcdFx0XHR0aGlzLmNyZWF0ZVllYXJzKCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAodGhpcy5jdXJyZW50VHlwZSA9PT0gJ3llYXInICYmIHllYXJIZWFkZXJFbCkge1xuXHRcdFx0XHRcdHRoaXMuY3VycmVudFR5cGUgPSB0aGlzLnR5cGU7XG5cdFx0XHRcdFx0dGhpcy51cGRhdGUoKTtcblx0XHRcdFx0fSBlbHNlIGlmICh5ZWFySXRlbUVsKSB7XG5cdFx0XHRcdFx0Y29uc3QgeWVhciA9IE51bWJlcih5ZWFySXRlbUVsLmRhdGFzZXQuY2FsZW5kYXJZZWFyKTtcblx0XHRcdFx0XHR0aGlzLmN1cnJlbnRUeXBlID0gdGhpcy50eXBlO1xuXHRcdFx0XHRcdGlmICh0aGlzLnNlbGVjdGVkTW9udGggPCB0aGlzLmRhdGVNaW4uZ2V0VVRDTW9udGgoKSAmJiB5ZWFyID09PSB0aGlzLmRhdGVNaW4uZ2V0VVRDRnVsbFllYXIoKSkge1xuXHRcdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5zZWxlY3RlZC5tb250aCA9IHRoaXMuZGF0ZU1pbi5nZXRVVENNb250aCgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodGhpcy5zZWxlY3RlZE1vbnRoID4gdGhpcy5kYXRlTWF4LmdldFVUQ01vbnRoKCkgJiYgeWVhciA9PT0gdGhpcy5kYXRlTWF4LmdldFVUQ0Z1bGxZZWFyKCkpIHtcblx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3Muc2VsZWN0ZWQubW9udGggPSB0aGlzLmRhdGVNYXguZ2V0VVRDTW9udGgoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5zZWxlY3RlZC55ZWFyID0geWVhcjtcblx0XHRcdFx0XHRpZiAodGhpcy5hY3Rpb25zLmNsaWNrWWVhcikgdGhpcy5hY3Rpb25zLmNsaWNrWWVhcihlKTtcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRjb25zdCBjbGlja01vbnRoID0gKCkgPT4ge1xuXHRcdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3Muc2VsZWN0aW9uLm1vbnRoKSByZXR1cm47XG5cdFx0XHRcdGlmICh0aGlzLmN1cnJlbnRUeXBlICE9PSAnbW9udGgnICYmIG1vbnRoSGVhZGVyRWwpIHtcblx0XHRcdFx0XHR0aGlzLmNyZWF0ZU1vbnRocygpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHRoaXMuY3VycmVudFR5cGUgPT09ICdtb250aCcgJiYgbW9udGhIZWFkZXJFbCkge1xuXHRcdFx0XHRcdHRoaXMuY3VycmVudFR5cGUgPSB0aGlzLnR5cGU7XG5cdFx0XHRcdFx0dGhpcy51cGRhdGUoKTtcblx0XHRcdFx0fSBlbHNlIGlmIChtb250aEl0ZW1FbCkge1xuXHRcdFx0XHRcdGNvbnN0IG1vbnRoID0gTnVtYmVyKG1vbnRoSXRlbUVsLmRhdGFzZXQuY2FsZW5kYXJNb250aCk7XG5cdFx0XHRcdFx0dGhpcy5jdXJyZW50VHlwZSA9IHRoaXMudHlwZTtcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLnNlbGVjdGVkLm1vbnRoID0gbW9udGg7XG5cdFx0XHRcdFx0aWYgKHRoaXMuYWN0aW9ucy5jbGlja01vbnRoKSB0aGlzLmFjdGlvbnMuY2xpY2tNb250aChlKTtcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRjbGlja0RheSgpO1xuXHRcdFx0Y2xpY2tZZWFyKCk7XG5cdFx0XHRjbGlja01vbnRoKCk7XG5cdFx0fSk7XG5cdH1cblxuXHRpbml0KCkge1xuXHRcdGlmICghdGhpcy5IVE1MRWxlbWVudCkgcmV0dXJuO1xuXHRcdHRoaXMudXBkYXRlKCk7XG5cdFx0dGhpcy5jbGljaygpO1xuXHR9XG59XG5cbndpbmRvdy5WYW5pbGxhQ2FsZW5kYXIgPSBWYW5pbGxhQ2FsZW5kYXI7XG4iXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsIl9fd2VicGFja19yZXF1aXJlX18iLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwiVmFuaWxsYUNhbGVuZGFyIiwiY29uc3RydWN0b3IiLCJzZWxlY3RvciIsIm9wdGlvbiIsInRoaXMiLCJIVE1MRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInR5cGUiLCJ0aXRsZSIsImRhdGUiLCJtaW4iLCJtYXgiLCJ0b2RheSIsIkRhdGUiLCJzZXR0aW5ncyIsImxhbmciLCJpc284NjAxIiwicmFuZ2UiLCJkaXNhYmxlZCIsInNlbGVjdGlvbiIsImRheSIsIm1vbnRoIiwieWVhciIsInNlbGVjdGVkIiwiYWN0aXZlIiwiZGF0ZXMiLCJob2xpZGF5cyIsInZpc2liaWxpdHkiLCJtb250aFNob3J0Iiwid2Vla051bWJlcnMiLCJ3ZWVrZW5kIiwibG9jYWxlIiwibW9udGhzIiwid2Vla2RheSIsImFjdGlvbnMiLCJjbGlja0RheSIsImNsaWNrTW9udGgiLCJjbGlja1llYXIiLCJwb3B1cHMiLCJjdXJyZW50VHlwZSIsImN1cnJlbnRUaXRsZSIsInNldFZhcmlhYmxlc0RhdGVzIiwiYWN0aXZlRGF0ZXMiLCJzZWxlY3RlZERhdGVzIiwic2VsZWN0ZWRNb250aCIsImdldFVUQ01vbnRoIiwic2VsZWN0ZWRZZWFyIiwiZ2V0VVRDRnVsbFllYXIiLCJ2aWV3WWVhciIsImRhdGVNaW4iLCJkYXRlTWF4IiwiY3JlYXRlRE9NIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiaW5uZXJIVE1MIiwiZ2VuZXJhdGVEYXRlIiwiZ2V0VVRDRGF0ZSIsImNvbnRyb2xBcnJvd3MiLCJpbmNsdWRlcyIsImFycm93UHJldiIsImFycm93TmV4dCIsImlzU2VsZWN0ZWRNaW5Nb3VudCIsImlzU2VsZWN0ZWRNYXhNb3VudCIsImlzU2VsZWN0ZWRNaW5ZZWFyIiwiaXNTZWxlY3RlZE1heFllYXIiLCJzdHlsZSIsImRlZmF1bHRDb250cm9sIiwieWVhckNvbnRyb2wiLCJ3cml0ZVllYXIiLCJpbm5lclRleHQiLCJ3cml0ZU1vbnRoIiwiY3JlYXRlV2VlayIsIndlZWtFbCIsInRlbXBsYXRlV2Vla0RheUVsIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInB1c2giLCJzaGlmdCIsImkiLCJsZW5ndGgiLCJ3ZWVrRGF5TmFtZSIsIndlZWtEYXlFbCIsImNsb25lTm9kZSIsImFwcGVuZCIsImdldFdlZWtOdW1iZXIiLCJjb3JyZWN0RGF0ZSIsInllYXJTdGFydCIsIlVUQyIsIndlZWtOdW1iZXIiLCJNYXRoIiwiY2VpbCIsIndlZWsiLCJjcmVhdGVXZWVrTnVtYmVycyIsImZpcnN0RGF5V2VlayIsImRheXNTZWxlY3RlZE1vbnRoIiwid2Vla051bWJlcnNFbCIsImRheXNFbCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb3VudFdlZWsiLCJ0ZW1wbGF0ZVdlZWtOdW1iZXJFbCIsImRhdGFzZXQiLCJjYWxlbmRhckRheSIsIndlZWtOdW1iZXJFbCIsImNhbGVuZGFyWWVhciIsImNyZWF0ZVBvcHVwIiwiZGF5RWwiLCJkYXlJbmZvIiwibW9kaWZpZXIiLCJodG1sIiwiY3JlYXRlRGF5cyIsImZpcnN0RGF5IiwiTnVtYmVyIiwiZ2V0VVRDRGF5IiwidGVtcGxhdGVEYXlFbCIsInNldERheU1vZGlmaWVyIiwiZGF5SUQiLCJBcnJheSIsImlzQXJyYXkiLCJmb3JFYWNoIiwiaG9saWRheSIsInRoaXNUb2RheSIsInRoaXNNb250aCIsInRoaXNEYXkiLCJmaW5kIiwic2VsZWN0ZWREYXRlIiwiZGF0ZURpc2FibGVkIiwicHJldk1vbnRoSUQiLCJwcmV2TW9udGgiLCJ0b3RhbCIsInJvd3MiLCJuZXh0RGF5cyIsIm5leHRNb250aElEIiwibmV4dE1vbnRoIiwiY2hhbmdlTW9udGgiLCJyb3V0ZSIsImxhc3RNb250aCIsImNyZWF0ZVllYXJzIiwieWVhcnNFbCIsInRlbXBsYXRlWWVhckVsIiwieWVhckVsIiwiY3JlYXRlTW9udGhzIiwibW9udGhzRWwiLCJ0ZW1wbGF0ZU1vbnRoRWwiLCJtb250aEVsIiwiY2FsZW5kYXJNb250aCIsInN1YnN0cmluZyIsImdldExvY2FsZSIsInRvTG9jYWxlU3RyaW5nIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJyZXBsYWNlIiwidXBkYXRlIiwiY2xpY2siLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImFycm93RWwiLCJ0YXJnZXQiLCJjbG9zZXN0IiwiYXJyb3dQcmV2RWwiLCJhcnJvd05leHRFbCIsImRheVByZXZFbCIsImRheU5leHRFbCIsInllYXJIZWFkZXJFbCIsInllYXJJdGVtRWwiLCJtb250aEhlYWRlckVsIiwibW9udGhJdGVtRWwiLCJjbGlja0RheVNpbmdsZSIsImNvbnRhaW5zIiwic3BsaWNlIiwiaW5kZXhPZiIsImNsaWNrRGF5TXVsdGlwbGUiLCJjbGlja0RheU11bHRpcGxlUmFuZ2VkIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsImFkZFNlbGVjdGVkRGF0ZSIsInNldFVUQ0RhdGUiLCJpbml0Iiwid2luZG93Il0sInNvdXJjZVJvb3QiOiIifQ==